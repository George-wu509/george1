
### LintCode 974: 01çŸ©é˜µé—®é¢˜

---

### é—®é¢˜æè¿°

ç»™å®šä¸€ä¸ªç”± `0` å’Œ `1` ç»„æˆçš„çŸ©é˜µ `matrix`ï¼Œæ±‚å‡ºä¸€ä¸ªæ–°çš„çŸ©é˜µ `dist`ï¼Œå…¶ä¸­ `dist[i][j]` è¡¨ç¤ºä»ä½ç½® `(i, j)` åˆ°æœ€è¿‘çš„ `0` çš„è·ç¦»ã€‚  
**æ³¨æ„**ï¼š

- ä¸¤ä¸ªç›¸é‚»æ ¼å­ä¹‹é—´çš„è·ç¦»ä¸º `1`ã€‚
Example:
ä¾‹1:
```python
è¾“å…¥:
[[0,0,0],
 [0,0,0],
 [0,0,0],
 [0,0,0],
 [0,0,0]]
è¾“å‡º:
[[0,0,0],
 [0,0,0],
 [0,0,0],
 [0,0,0],
 [0,0,0]]
```
ä¾‹2:
```python
è¾“å…¥:
[[0,1,0,1,1],
 [1,1,0,0,1],
 [0,0,0,1,0],
 [1,0,1,1,1],
 [1,0,0,0,1]]
è¾“å‡º:
[[0,1,0,1,2],
 [1,1,0,0,1],
 [0,0,0,1,0],
 [1,0,1,1,1],
 [1,0,0,0,1]]
```
è§£é‡‹:
è¼¸å…¥ä¸€å€‹matrixçŸ©é™£è£¡é¢æœ‰åŒ…æ‹¬0è·Ÿ1. è¼¸å‡ºåŒæ¨£sizeçš„distçŸ©é™£ä»£è¡¨åˆ°æœ€è¿‘0çš„è·é›¢, å¦‚æœæ ¼å­æœ¬èº«æ˜¯0é‚£è·é›¢å°±æ˜¯0, å¦‚æœæ˜¯1çš„å°±æ‰¾å¾é€™å€‹æ ¼å­åˆ°æœ€è¿‘0æ ¼å­çš„è·é›¢. èˆ‰ä¾‹(0,4)åˆ°(1,3)çš„è·é›¢æ˜¯2. 

---

### è§£æ³•ï¼šBFSï¼ˆå¤šæºå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰

#### æ€è·¯

1. **å¤šæº BFS çš„æ¦‚å¿µ**ï¼š
    
    - é€šå¸¸ BFS ä»¥ä¸€ä¸ªæºç‚¹å¼€å§‹æœç´¢ï¼Œè€Œå¤šæº BFS æ˜¯ä»å¤šä¸ªæºç‚¹åŒæ—¶å¼€å§‹æœç´¢ã€‚
    - åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œæ‰€æœ‰å€¼ä¸º `0` çš„ä½ç½®æ˜¯æºç‚¹ã€‚
2. **åˆå§‹åŒ–**ï¼š
    
    - åˆ›å»ºç»“æœçŸ©é˜µ `dist`ï¼Œåˆå§‹åŒ–æ‰€æœ‰ä½ç½®ä¸º `0`ã€‚
    - æ‰¾åˆ°çŸ©é˜µä¸­æ‰€æœ‰å€¼ä¸º `0` çš„ä½ç½®ï¼Œå¹¶å°†å®ƒä»¬åŠ å…¥é˜Ÿåˆ— `q`ã€‚
    - ä½¿ç”¨é›†åˆ `seen` è®°å½•å·²è®¿é—®çš„ä½ç½®ï¼Œé¿å…é‡å¤è®¿é—®ã€‚
3. **BFS æœç´¢**ï¼š
    
    - ä»é˜Ÿåˆ—ä¸­å–å‡ºå½“å‰èŠ‚ç‚¹ `(i, j)`ï¼Œå°è¯•å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘æ‰©å±•ã€‚
    - å¦‚æœæ‰©å±•ä½ç½® `(ni, nj)` æœªè¢«è®¿é—®ï¼Œæ›´æ–°å…¶è·ç¦»ä¸ºå½“å‰èŠ‚ç‚¹è·ç¦»åŠ  `1`ï¼Œå¹¶å°†å…¶åŠ å…¥é˜Ÿåˆ—ã€‚
4. **ç»ˆæ­¢æ¡ä»¶**ï¼š
    
    - é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œæ‰€æœ‰ä½ç½®çš„æœ€çŸ­è·ç¦»å‡å·²è®¡ç®—å®Œæˆã€‚
5. **è¿”å›ç»“æœ**ï¼š
    
    - è¿”å›è®¡ç®—å®Œæˆçš„çŸ©é˜µ `dist`ã€‚




### ä»£ç å®ç°

```python
from typing import List
import collections

class Solution:
    def update_matrix(self, matrix: List[List[int]]) -> List[List[int]]:
        m, n = len(matrix), len(matrix[0])
        # åˆå§‹åŒ–ç»“æœçŸ©é˜µ
        dist = [[0] * n for _ in range(m)]
        # æ‰¾åˆ°æ‰€æœ‰å€¼ä¸º 0 çš„ä½ç½®
        zeroes_pos = [(i, j) for i in range(m) for j in range(n) if matrix[i][j] == 0]
        # å°†æ‰€æœ‰ 0 çš„ä½ç½®ä½œä¸º BFS èµ·å§‹ç‚¹
        q = collections.deque(zeroes_pos)
        # è®°å½•å·²è®¿é—®çš„èŠ‚ç‚¹
        seen = set(zeroes_pos)

        # å¹¿åº¦ä¼˜å…ˆæœç´¢
        while q:
            i, j = q.popleft()
            # å°è¯•å‘å››ä¸ªæ–¹å‘æ‰©å±•
            for ni, nj in [(i - 1, j), (i + 1, j), (i, j - 1), (i, j + 1)]:
                if 0 <= ni < m and 0 <= nj < n and (ni, nj) not in seen:
                    dist[ni][nj] = dist[i][j] + 1  # æ›´æ–°è·ç¦»
                    q.append((ni, nj))  # å°†æ–°ä½ç½®åŠ å…¥é˜Ÿåˆ—
                    seen.add((ni, nj))  # æ ‡è®°æ–°ä½ç½®ä¸ºå·²è®¿é—®
        
        return dist

```
pass
è§£é‡‹:
step1  å‰µå»ºè·Ÿmatrixä¸€æ¨£å¤§å°distçŸ©é™£, ä¹Ÿæ‰¾å‡ºæ‰€æœ‰0æ ¼å­çš„ä½ç½® (zeroes_pos).  é‚„æœ‰seenç´€éŒ„å·²è¨ªå•  
step2  å¾matrixçš„æ¯å€‹æ˜¯0çš„æ ¼å­é–‹å§‹(å¤šæºBFS), ä¸¦æŠŠzeros_posåŠ å…¥ deque   
step3  é–‹å§‹BFS, æŠŠ0çš„æ ¼å­popå‡ºä¾†, ç„¶å¾Œæª¢æŸ¥é€™å€‹æ ¼å­çš„ä¸Šä¸‹å·¦å³, ä¸¦æ›´æ–°distçŸ©é™£. ä¹ŸæŠŠé€™æ ¼å­åŠ å…¥deque. 

### ç¤ºä¾‹è¾“å…¥è¾“å‡º

### **ç¤ºä¾‹ï¼šBFS ä» `0` å¼€å§‹è®¡ç®— `dist[][]`**

---
### **è¾“å…¥çŸ©é˜µ**
```
matrix = [
  [0, 1, 1],
  [1, 1, 1],
  [1, 1, 0]
]
```

---

## **ğŸš€ BFS é€æ­¥æ‰§è¡Œ**

### **åˆå§‹åŒ–**

1. **åˆ›å»º `dist[][]`ï¼Œæ‰€æœ‰ `1` è®¾ä¸º `âˆ`ï¼Œæ‰€æœ‰ `0` è®¾ä¸º `0`**
```
dist = [
  [0, âˆ, âˆ],
  [âˆ, âˆ, âˆ],
  [âˆ, âˆ, 0]
]
```

2. **BFS é˜Ÿåˆ—åˆå§‹åŒ–ï¼Œæ‰€æœ‰ `0` å…¥é˜Ÿ**

`queue = deque([(0,0), (2,2)])  # (x, y)`

---

### **ğŸ”¹ BFS ç¬¬ 1 è½®**

#### **é˜Ÿåˆ— `queue`**

`[(0,0), (2,2)]`

#### **å¤„ç† `(0,0)`**

- æ‰©å±• `(0,1)`, æ›´æ–° `dist[0][1] = 1`
- æ‰©å±• `(1,0)`, æ›´æ–° `dist[1][0] = 1`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(2,2), (0,1), (1,0)])`

---

#### **å¤„ç† `(2,2)`**

- æ‰©å±• `(2,1)`, æ›´æ–° `dist[2,1] = 1`
- æ‰©å±• `(1,2)`, æ›´æ–° `dist[1,2] = 1`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(0,1), (1,0), (2,1), (1,2)])`

---

#### **æ›´æ–° `dist[][]`**
```
[
  [0, 1, âˆ],
  [1, âˆ, 1],
  [âˆ, 1, 0]
]
```

---

### **ğŸ”¹ BFS ç¬¬ 2 è½®**

#### **é˜Ÿåˆ— `queue`**

`[(0,1), (1,0), (2,1), (1,2)]`

#### **å¤„ç† `(0,1)`**

- æ‰©å±• `(0,2)`, æ›´æ–° `dist[0,2] = 2`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(1,0), (2,1), (1,2), (0,2)])`

---

#### **å¤„ç† `(1,0)`**

- æ‰©å±• `(2,0)`, æ›´æ–° `dist[2,0] = 2`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(2,1), (1,2), (0,2), (2,0)])`

---

#### **å¤„ç† `(2,1)`**

- ä¸æ›´æ–° `(2,2)` å› ä¸º `dist[2,2] = 0`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(1,2), (0,2), (2,0)])`

---

#### **å¤„ç† `(1,2)`**

- æ‰©å±• `(1,1)`, æ›´æ–° `dist[1,1] = 2`
- **é˜Ÿåˆ—çŠ¶æ€**

`queue = deque([(0,2), (2,0), (1,1)])`

---

#### **æ›´æ–° `dist[][]`**

```
[
  [0, 1, 2],
  [1, 2, 1],
  [2, 1, 0]
]
```

---

### **ğŸ”¹ BFS ç¬¬ 3 è½®**

#### **é˜Ÿåˆ— `queue`**

`[(0,2), (2,0), (1,1)]`

#### **å¤„ç† `(0,2)`**

- æ— å¯æ‰©å±•

---

#### **å¤„ç† `(2,0)`**

- æ— å¯æ‰©å±•

---

#### **å¤„ç† `(1,1)`**

- æ— å¯æ‰©å±•

---

#### **é˜Ÿåˆ— `queue` ä¸ºç©ºï¼ŒBFS ç»“æŸ**

---

## **ğŸ¯ æœ€ç»ˆ `dist[][]`**

```
[
  [0, 1, 2],
  [1, 2, 1],
  [2, 1, 0]
]
```
---

## **âœ… ç»“è®º**

1. **BFS é€å±‚æ‰©å±•ï¼Œä¿è¯æœ€çŸ­è·¯å¾„**

---

### å…¶ä»–è§£æ³•ç®€è¿°

#### 1. åŠ¨æ€è§„åˆ’

- ä¸¤æ¬¡éå†çŸ©é˜µï¼š
    1. ä»å·¦ä¸Šåˆ°å³ä¸‹æ›´æ–°è·ç¦»ã€‚
    2. ä»å³ä¸‹åˆ°å·¦ä¸Šæ›´æ–°è·ç¦»ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸º `O(m * n)`ï¼Œç©ºé—´å¤æ‚åº¦ä¸º `O(1)`ã€‚

#### 2. åŒå‘ BFS

- åŒæ—¶ä»æ‰€æœ‰ `0` å’Œæ‰€æœ‰ `1` çš„ä½ç½®å¼€å§‹æœç´¢ï¼Œæ‰¾åˆ°æœ€çŸ­è·¯å¾„ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸º `O(m * n)`ï¼Œå®ç°è¾ƒå¤æ‚ã€‚

---

### æ€»ç»“

- **BFS è§£æ³•**æ˜¯è§£å†³è¯¥é—®é¢˜çš„æœ€ä¼˜é€‰æ‹©ï¼Œé€‚ç”¨äºæ±‚è§£æœ€çŸ­è·¯å¾„é—®é¢˜ã€‚
- æ—¶é—´å¤æ‚åº¦ä¸º **`O(m * n)`**ï¼Œç©ºé—´å¤æ‚åº¦ä¸º **`O(m * n)`**ã€‚
- **åŠ¨æ€è§„åˆ’** æä¾›äº†å†…å­˜ä¼˜åŒ–çš„æ›¿ä»£æ–¹æ¡ˆï¼Œé€‚ç”¨äºéœ€è¦åŸåœ°æ›´æ–°çš„åœºæ™¯ã€‚



### **å…·ä½“ä¸¾ä¾‹è¯´æ˜ï¼šä¸ºä»€ä¹ˆ BFS éœ€è¦ä» `0` å¼€å§‹ï¼Œè€Œä¸æ˜¯ä» `1` å¼€å§‹ï¼Ÿ**

---

å‡è®¾æœ‰å¦‚ä¸‹ `3Ã—3` çš„çŸ©é˜µï¼š
```
matrix =
[
  [0, 1, 1],
  [1, 1, 1],
  [1, 1, 0]
]

ç­”æ¡ˆ: Distance matrix
[   
  [0, 1, 2],   
  [1, 2, 1],   
  [2, 1, 0] 
]
```

### **æ–¹æ³• 1ï¼šä»æ¯ä¸ª `1` å¼€å§‹ BFSï¼ˆé”™è¯¯æ–¹å¼ï¼‰**

å¦‚æœæˆ‘ä»¬é”™è¯¯åœ°ä»æ‰€æœ‰ `1` å¼€å§‹ BFSï¼Œæ¯ä¸ª `1` éƒ½è¦è‡ªå·±å»æ‰¾æœ€è¿‘çš„ `0`ï¼Œå¦‚ä¸‹ï¼š

#### **ç¬¬ä¸€è½® BFSï¼ˆæ‰€æœ‰ `1` å¼€å§‹ï¼‰**

- `(0,1)` **æ‰¾åˆ°** `(0,0)`ï¼Œæ›´æ–° `dist[0][1] = 1`
- `(0,2)` **æ‰¾åˆ°** `(0,0)`ï¼Œæ›´æ–° `dist[0][2] = 2`
- `(1,0)` **æ‰¾åˆ°** `(0,0)`ï¼Œæ›´æ–° `dist[1][0] = 1`
- `(1,1)` **æ‰¾åˆ°** `(0,1)`ï¼Œæ›´æ–° `dist[1][1] = 2`
- `(1,2)` **æ‰¾åˆ°** `(0,2)`ï¼Œæ›´æ–° `dist[1][2] = 3`
- `(2,0)` **æ‰¾åˆ°** `(1,0)`ï¼Œæ›´æ–° `dist[2][0] = 2`
- `(2,1)` **æ‰¾åˆ°** `(1,1)`ï¼Œæ›´æ–° `dist[2][1] = 3`
- `(2,2)` **æ‰¾åˆ°** `(2,2)`ï¼ˆåŸæœ¬æ˜¯ `0`ï¼‰

**æ­¤æ—¶çš„ `dist` ç»“æœï¼š**

`[   [0, 1, 2],   [1, 2, 3],   [2, 3, 0] ]`

---

#### **é—®é¢˜ï¼š**

- **è®¡ç®—å†—ä½™**ï¼šæ¯ä¸ª `1` **è‡ªå·±å»æ‰¾ `0`**ï¼Œæœ‰å¤§é‡é‡å¤è®¡ç®—ã€‚ä¾‹å¦‚ `(1,1)` éœ€è¦ç»è¿‡ `(0,1)` æ‰åˆ° `(0,0)`ï¼Œä½† `(0,1)` æœ¬èº«å°±åº”è¯¥è¢«æ›´æ–°ï¼Œè€Œä¸éœ€è¦ `(1,1)` é‡æ–°æœç´¢ã€‚
- **æ— æ³•ä¿è¯æœ€çŸ­è·¯å¾„**ï¼šå¦‚ `(2,1)` å…ˆæ‰¾åˆ° `(1,1)`ï¼Œä½†å…¶å®åº”è¯¥ç›´æ¥å» `(2,2)`ã€‚

---

### **æ–¹æ³• 2ï¼šä»æ‰€æœ‰ `0` å¼€å§‹ BFSï¼ˆæ­£ç¡®æ–¹å¼ï¼‰**

#### **ç¬¬ä¸€æ­¥ï¼šåˆå§‹åŒ–æ‰€æœ‰ `0`**

æˆ‘ä»¬æŠŠ **æ‰€æœ‰ `0` ä½œä¸º BFS èµ·ç‚¹**ï¼Œå¹¶åˆå§‹åŒ– `dist[][]`ï¼š

plaintext

è¤‡è£½ç·¨è¼¯

`[   [0, âˆ, âˆ],   [âˆ, âˆ, âˆ],   [âˆ, âˆ, 0] ]`

ç„¶åï¼ŒæŠŠæ‰€æœ‰ `0` åŠ å…¥ BFS é˜Ÿåˆ—ï¼š

python

è¤‡è£½ç·¨è¼¯

`queue = [(0,0), (2,2)]`

---

#### **ç¬¬äºŒæ­¥ï¼šBFS é€å±‚æ‰©å±•**

**ç¬¬ä¸€è½®æ‰©å±• (`step = 1`)**

- ä» `(0,0)` å‡ºå‘ï¼Œæ›´æ–°ï¼š
    - `(0,1) = 1`
    - `(1,0) = 1`
- ä» `(2,2)` å‡ºå‘ï¼Œæ›´æ–°ï¼š
    - `(2,1) = 1`
    - `(1,2) = 1`

**æ›´æ–°åçš„ `dist[][]`ï¼š**

plaintext

è¤‡è£½ç·¨è¼¯

`[   [0, 1, âˆ],   [1, âˆ, 1],   [âˆ, 1, 0] ]`

---

**ç¬¬äºŒè½®æ‰©å±• (`step = 2`)**

- ä» `(0,1)` å‡ºå‘ï¼Œæ›´æ–° `(0,2) = 2`
- ä» `(1,0)` å‡ºå‘ï¼Œæ›´æ–° `(2,0) = 2`
- ä» `(1,2)` å‡ºå‘ï¼Œæ›´æ–° `(1,1) = 2`

**æ›´æ–°åçš„ `dist[][]`ï¼š**

plaintext

è¤‡è£½ç·¨è¼¯

`[   [0, 1, 2],   [1, 2, 1],   [2, 1, 0] ]`

---

**æœ€ç»ˆç»“æœ**

plaintext

è¤‡è£½ç·¨è¼¯

`[   [0, 1, 2],   [1, 2, 1],   [2, 1, 0] ]`

---

### **æ–¹æ³• 2 æ¯”æ–¹æ³• 1 æ›´å¥½çš„åŸå› **

|**æ–¹æ³•**|**é—®é¢˜**|**è®¡ç®—æ•ˆç‡**|**ä¿è¯æœ€çŸ­è·¯å¾„**|
|---|---|---|---|
|**ä» `1` å¼€å§‹ BFSï¼ˆé”™è¯¯æ–¹æ³•ï¼‰**|æ¯ä¸ª `1` è‡ªå·±æ‰¾ `0`ï¼Œè®¡ç®—å†—ä½™|**O(nm) ~ O(nÂ²mÂ²)**ï¼ˆå¯èƒ½æœç´¢å¤šä¸ªæ–¹å‘ï¼‰|âŒ ä¸èƒ½ä¿è¯|
|**ä» `0` å¼€å§‹ BFSï¼ˆæ­£ç¡®æ–¹æ³•ï¼‰**|`0` é€å±‚æ‰©å±• `1`ï¼Œæ— å†—ä½™è®¡ç®—|**O(nm)**ï¼ˆæ¯ä¸ªç‚¹åªè®¿é—®ä¸€æ¬¡ï¼‰|âœ… ä¿è¯æœ€çŸ­|

---

### **ç»“è®º**

âœ… **åº”è¯¥ä»æ‰€æœ‰ `0` å¼€å§‹ BFS**ï¼Œå› ä¸ºï¼š

1. **é¿å…é‡å¤è®¡ç®—**ï¼Œæ¯ä¸ª `1` åªéœ€è¦ä»æœ€è¿‘çš„ `0` æ›´æ–°ï¼Œè€Œä¸æ˜¯è‡ªå·±å»æ‰¾ `0`ã€‚
2. **ä¿è¯æœ€çŸ­è·¯å¾„**ï¼Œæ¯ä¸ª `1` åªä¼šåœ¨ **è¢« BFS è®¿é—®çš„ç¬¬ä¸€æ¬¡æ›´æ–°**ï¼Œåç»­ä¸ä¼šè¢«æ›´è¿œçš„ `0` å½±å“è·¯å¾„é•¿åº¦ã€‚
3. **æ—¶é—´å¤æ‚åº¦æœ€ä¼˜** `O(nm)`ï¼Œæ¯ä¸ªå•å…ƒæ ¼åªå…¥é˜Ÿå‡ºé˜Ÿä¸€æ¬¡ï¼Œé¿å…æŒ‡æ•°çº§è®¡ç®—ã€‚

ğŸš€ **BFS ä» `0` å¼€å§‹ï¼Œæ˜¯ `01 çŸ©é˜µ` æœ€ä¼˜è§£ï¼**