Lintcode 1510
给定两个由小写字母构成的字符串 `A` 和 `B`，如果能通过恰好交换一次 `A` 中的两个下标不同的字母后得到 `B`，就返回 `true`；否则返回 `false`。

**示例 1:**
```python
"""```
输入: A = "ab", B = "ba"
输出: true
```
**示例 2:**
```python
"""
输入: A = "ab", B = "ab"
输出: false
```
**示例 3:**
```python
"""
输入: A = "aa", B = "aa"
输出: true
```
**示例 4:**
```python
"""
输入: A = "aaaaaaabc", B = "aaaaaaacb"
输出: true
```
**示例 5:**
```python
"""
输入: A = "", B = "aa"
输出: false
```


```python
def buddyStrings(self, a: str, b: str) -> bool:
	if len(a) != len(b):
		return False
	if a == b:
		if len(set(a)) < len(b): 
			return True
		else:
			return False
	diff = [(aa, bb) for aa, bb in zip(a, b) if aa != bb]
	return len(diff) == 2 and diff[0][0] == diff[1][1] and diff[0][1] == diff[1][0]
```
pass


本題 **`buddyStrings(self, a: str, b: str) -> bool`** 目標是：

- 判斷 **是否能通過交換 `a` 中的兩個字符** 使其與 `b` 相等。

---

## **解法分析**

有 **兩種可能讓 `a` 變成 `b`**：

1. **當 `a == b`，且 `a` 內部有至少一個重複字母時，可交換這兩個字母來保持 `a` 不變**，即 `a` 本身已經等於 `b`，但需要至少一對相同字母來交換。
2. **當 `a != b`，且 `a, b` 之間只有 2 個不同字符，並且它們可互換**，這樣 `a` 經過一次交換後可變成 `b`。

---

## **變數表**

|變數名稱|含義|
|---|---|
|`a, b`|兩個輸入的字串|
|`diff`|`a, b` 中所有不同的字符對|
|`set(a)`|用於檢查 `a` 是否有重複字母|

---

## **具體步驟**

### **Step 1: 檢查長度**

- 若 `len(a) != len(b)`，則無法通過交換變成 `b`，直接返回 `False`。

### **Step 2: 當 `a == b`**

- 如果 `a` 本身已經等於 `b`，但 `a` 裡面有 **至少一個重複字母**，則可交換這些字母來保持 `a` 不變，返回 `True`。
- **若 `a` 沒有重複字母**，則無法交換任何字符來改變 `a`，返回 `False`。

### **Step 3: 當 `a != b`**

- **收集所有 `a` 和 `b` 之間不同的字符對 (`diff`)**
- **若 `diff` 的長度不等於 2，則返回 `False`**
- **檢查 `diff` 內的兩個字符對是否可互換**：
    - **`diff[0][0] == diff[1][1]` 且 `diff[0][1] == diff[1][0]`，則返回 `True`**
    - 否則返回 `False`

---

## **範例解析**

### **範例 1**

python

複製編輯

`a = "ab" b = "ba"`

**Step 1: 長度檢查**

- `len(a) == len(b) = 2`，通過

**Step 2: `a != b`**

- **找出不同字符**
    
    python
    
    複製編輯
    
    `diff = [('a', 'b'), ('b', 'a')]`
    
- **檢查是否可互換**
    - `diff[0][0] == diff[1][1]` (`'a' == 'a'`)
    - `diff[0][1] == diff[1][0]` (`'b' == 'b'`)
- **結果**：`True`

---

### **範例 2**

python

複製編輯

`a = "aa" b = "aa"`

**Step 1: 長度檢查**

- `len(a) == len(b) = 2`，通過

**Step 2: `a == b`**

- **檢查是否有重複字母**
    
    python
    
    複製編輯
    
    `set(a) = {'a'}，len(set(a)) < len(b)`
    
- `a` 裡有重複字母 `"aa"`，可交換 `"a"` 來保持 `a` 不變。
- **結果**：`True`

---

### **範例 3**

python

複製編輯

`a = "ab" b = "ab"`

**Step 1: 長度檢查**

- `len(a) == len(b) = 2`，通過

**Step 2: `a == b`**

- **檢查是否有重複字母**
    
    python
    
    複製編輯
    
    `set(a) = {'a', 'b'}，len(set(a)) == len(b)`
    
- `a` **沒有重複字母**，因此無法通過交換讓 `a` 變成 `b`。
- **結果**：`False`

---

### **範例 4**

python

複製編輯

`a = "abc" b = "bca"`

**Step 1: 長度檢查**

- `len(a) == len(b) = 3`，通過

**Step 2: `a != b`**

- **找出不同字符**
    
    python
    
    複製編輯
    
    `diff = [('a', 'b'), ('b', 'c'), ('c', 'a')]`
    
- `diff` **超過 2 個**，無法通過**單次交換**讓 `a` 變成 `b`。
- **結果**：`False`

---

## **時間與空間複雜度分析**

- **時間複雜度**
    
    - **`len(a) != len(b)` 檢查**：`O(1)`
    - **建立 `set(a)` (檢查重複字母)**：`O(N)`
    - **找 `diff` (遍歷 `a, b`)**：`O(N)`
    - **總體時間複雜度**： O(N)O(N)O(N)
- **空間複雜度**
    
    - **使用 `set(a)`**：`O(N)`
    - **存儲 `diff` (最多 `O(2)`)**：`O(1)`
    - **總體空間複雜度**： O(N)O(N)O(N)

---

## **其他解法想法（不含代碼）**

1. **使用 `Counter` 計數法 (`O(N)`)**
    
    - 若 `a == b`，則用 `Counter(a)` 來判斷是否有重複字母。
    - 若 `a != b`，則統計不同字符並判斷是否能互換。
2. **暴力嘗試交換 (`O(N^2)`)**
    
    - 嘗試對 `a` 中的 **每對字母進行交換**，看是否能得到 `b`。
    - **時間複雜度過高，不可行。**
3. **Boyer-Moore 字符串匹配 (`O(N)`)**
    
    - 適用於 `a, b` 很長時，先快速檢查是否存在 2 個不同字符，然後進行交換檢查。

---

## **結論**

- **最佳方法**：**遍歷 `a, b` 找不同字符 (`O(N)`)**，並檢查 `set(a)` 是否有重複字母。
- **可替代方法**
    - **`Counter` (`O(N)`)**：適用於 Python `collections` 操作較快時。
    - **暴力交換 (`O(N^2)`)**：不可行。
    - **Boyer-Moore (`O(N)`)**：適用於超長字串的情況。

**此方法能夠高效判斷是否可透過交換讓 `a` 變成 `b`，並在 `O(N)` 時間內完成**