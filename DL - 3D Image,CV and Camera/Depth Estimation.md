

好的，這就將上面關於常用深度估計（Depth Estimation）方法的詳細解釋整理成表格形式，以便於比較。

**常用深度估計方法比較表**

|方法 (Method)|分類 (Category)|基本原理 (Core Principle)|主要實現/技術 (Key Implementation/Tech)|優點 (Pros)|缺點 (Cons)|深度類型/尺度 (Depth Type/Scale)|
|:--|:--|:--|:--|:--|:--|:--|
|**雙目立體視覺** (Stereo Vision)|被動 (Passive)|利用兩個相機視差 (Disparity)，透過三角測量計算深度。|相機標定、圖像校正、對應點匹配 (局部/全局/學習 - SGM, PSMNet 等)|可得絕對尺度深度(需標定)、精度潛力高、被動式、成本相對適中。|匹配困難(弱紋理/重複/遮擋)、需精確標定、精度隨距離下降、受基線限制。|絕對尺度 (Absolute Scale)|
|**單目視覺 - 運動恢復結構/視覺 SLAM** (Monocular - SfM/SLAM)|被動 (Passive)|利用移動相機的運動視差 (Motion Parallax)，追蹤特徵點進行三角測量。|特徵提取/追蹤、對極幾何、光束法平差 (Bundle Adjustment)、(ORB-SLAM, DSO 等)|硬體簡單(單相機)、可重建大範圍結構。|**尺度模糊性**、需相機運動、對紋理/光照敏感、累積誤差/漂移。|相對尺度 / 尺度模糊 (Relative/Ambiguous Scale)|
|**單目視覺 - 學習式深度估計** (Monocular - Learning-based)|被動 (Passive)|用深度學習模型從單張圖像回歸深度圖，學習圖像線索與深度的關係。|CNN 編碼器-解碼器架構 (U-Net 等)、(MiDaS, Depth Anything 等)|單張靜態圖像可得稠密深度、推斷快、硬體簡單。|**通常尺度模糊**、依賴訓練數據/先驗、泛化能力有限、精度相對較低。|通常相對尺度 / 尺度模糊 (Usually Relative/Ambiguous Scale)|
|**結構光** (Structured Light)|主動 (Active)|投射已知光學圖案，觀察其變形，透過三角測量計算深度。|投影儀、相機、圖案編解碼、相機-投影儀標定。|精度高、可得稠密深度、對無紋理表面有效。|對環境光敏感、對特定表面(透明/反光)困難、範圍/速度受限、需標定。|絕對尺度 (Absolute Scale)|
|**飛行時間** (Time-of-Flight, ToF)|主動 (Active)|測量光(通常紅外)往返物體的時間來計算距離。|dToF/LiDAR (脈衝光+計時器)、iToF (調製光+相位/幅度測量)。|直接測距、對紋理不敏感、抗環境光較好(特定波長)、可測較遠距離(尤其 LiDAR)。|解析度通常較低、多路徑干擾、對特定表面困難、成本可能高(尤其 LiDAR)、iToF 有模糊性/精度限制。|絕對尺度 (Absolute Scale)|

匯出到試算表

**說明:**

- **分類:** 指該方法是依賴環境光的「被動」方法，還是自行發射能量的「主動」方法。
- **基本原理:** 簡述該方法測量深度的核心思想。
- **主要實現/技術:** 列舉實現該方法所涉及的關鍵技術、算法或組件。
- **優點:** 列出該方法的主要長處。
- **缺點:** 列出該方法的主要限制或不足之處。
- **深度類型/尺度:** 指明該方法通常提供的是具有真實世界單位（如米）的「絕對尺度」深度，還是僅能反映遠近關係或大小未定的「相對尺度/尺度模糊」深度。


詳細解釋常用的深度估計（Depth Estimation）方法，並按照 **主動方法 (Active Methods)** 和 **被動方法 (Passive Methods)**（包含雙目與單目視覺）進行分類說明。被動方法依賴環境光，而主動方法會自行發射能量（通常是光）來探測深度。

**一、 主動方法 (Active Methods)**

主動方法透過向場景發射特定信號（通常是光），並分析反射回來的信號來直接或間接地測量距離。

1. **結構光 (Structured Light)**
    
    - **原理：** 向目標物體投射一個已知模式（Pattern）的光（例如，條紋、網格、或複雜的編碼圖案），然後使用一個或多個相機從不同於投影儀的角度捕捉被物體表面調製（扭曲）後的圖案。由於已知投射的模式和相機/投影儀的相對幾何位置（需要預先標定），可以通過分析捕捉圖像中圖案的變形情況，利用三角測量原理計算出物體表面各點的三維座標和深度。
    - **流程：**
        - 投影儀投射已知光學圖案到場景。
        - 相機捕捉被物體表面調製後的圖案圖像。
        - 圖像處理算法識別捕捉圖像中的圖案，並與原始投射圖案建立對應關係（例如，找到某條被捕捉到的條紋對應於原始投射的第幾條）。
        - 利用已標定的相機與投影儀之間的幾何關係（類似雙目視覺的基線和姿態），對每個建立對應的點進行三角測量，計算其三維座標和深度。
    - **優點：**
        - 可以獲得高精度、高密度的深度圖。
        - 對於缺乏自身紋理的物體表面效果很好（因為是主動投射紋理）。
    - **缺點：**
        - 對環境光敏感，強烈的環境光（尤其是陽光）會干擾圖案識別。
        - 對於透明、高反光或吸光（黑色）的表面可能效果不佳。
        - 測量範圍相對有限，通常適用於室內或近距離場景。
        - 可能需要投射一系列不同的圖案來解碼對應關係，限制了動態場景的捕捉速度。
        - 需要精確的相機-投影儀標定。
2. **飛行時間 (Time-of-Flight, ToF)**
    
    - **原理：** 通過測量光（通常是不可見的紅外光）從發射器發出，到達物體表面，然後反射回接收器所花費的**時間**來計算距離。因為光速 (c) 是已知的，距離 (d) 可以通過公式 d = (c * time) / 2 計算得出。
    - **主要類型：**
        - **直接飛行時間 (Direct ToF, dToF) / 激光雷達 (LiDAR)：** 發射短促的光脈衝，使用高精度的計時器直接測量每個脈衝發射和接收之間的時間差。通常使用掃描機制（如旋轉鏡面）來覆蓋整個視場。LiDAR 是 dToF 技術的一個主要應用形式，尤其在自動駕駛和測繪領域。
        - **間接飛行時間 (Indirect ToF, iToF) / 連續波法 (Continuous Wave, CW-ToF)：** 發射連續的、經過調製（強度或頻率）的光波。通過測量反射光相對於發射光的**相位差 (Phase Shift)** 或幅度變化，來間接推算出光的飛行時間和距離。許多消費級的深度相機（如 Kinect v2, 手機上的 ToF 傳感器）採用此類技術。
    - **優點：**
        - 直接測量深度，計算相對簡單。
        - 對物體表面紋理不敏感。
        - 相對於結構光，通常對環境光的抗干擾能力更強（使用特定波長的紅外光和濾光片）。
        - 可以實現較遠的測量距離（尤其是 dToF/LiDAR）。
        - iToF 可以實現較高的幀率（無須掃描或多圖案）。
    - **缺點：**
        - 深度圖的空間解析度通常低於普通相機。
        - 可能受到多路徑干擾（光線在到達接收器前經過多次反射）。
        - 對於高反射或吸光表面可能存在測量困難或誤差。
        - dToF/LiDAR 系統（特別是高精度、廣視場角的）成本較高。
        - iToF 的測量精度可能受調製頻率和信噪比限制，且可能存在深度模糊（測量距離超過一個調製波長）問題。

**二、 被動方法 (Passive Methods) - 基於相機**

被動方法不發射任何能量，僅依賴環境光線和一個或多個相機來推斷深度。

1. **雙目立體視覺 (Stereo Vision)**
    
    - **原理：** （如上一問詳述）利用兩個已知相對位置的相機捕捉的左右視圖，通過尋找對應點並計算它們之間的視差，最後利用三角測量原理恢復深度。
    - **常用方法：** 核心在於對應點匹配，包括局部方法（如塊匹配）、全局方法（如圖割、SGM）和基於深度學習的方法（如 PSMNet, CREStereo）。
    - **優點：**
        - 可以提供具有絕對尺度的稠密或半稠密深度圖（前提是基線已知）。
        - 技術相對成熟，成本可以做到較低（相比 LiDAR）。
        - 被動式，不發射能量，功耗相對較低。
    - **缺點：**
        - 對應點匹配是關鍵難點，在弱紋理、重複紋理、遮擋區域容易失敗。
        - 需要精確的雙目標定。
        - 深度測量的精度隨距離增加而降低（遠處物體視差小，微小誤差影響大）。
        - 有效測量範圍和精度受基線長度影響。
2. **基於單目視覺 (Monocular Vision) 的方法**
    
    - **原理：** 只使用單個相機，需要利用其他線索或信息來估計深度。
    - **常用方法：**
        - **運動恢復結構 (Structure from Motion, SfM) / 視覺 SLAM:** 利用相機**移動**時產生的運動視差，通過追蹤多幀圖像間的特徵點來同時估計相機位姿和場景三維結構（深度）。
        - **Shape-from-X (SfX):** 利用單張**靜態**圖像中的線索，如陰影 (Shading)、紋理 (Texture)、輪廓 (Contour)、聚焦/散焦 (Focus/Defocus) 等來推斷表面形狀或相對深度。這些方法假設較多，通用性有限。
        - **基於學習的單目深度估計 (Learning-based Monocular Depth Estimation):** 利用深度神經網路，從大量圖像和對應深度圖的數據集中學習從單張 2D 圖像直接預測稠密深度圖。模型學習利用圖像中的各種隱式深度線索（物體大小先驗、透視、遮擋等）。
    - **優點：**
        - 硬體成本最低，只需要一個標準相機。
        - 應用靈活性高。
        - 基於學習的方法可以直接從單張靜態圖像輸出稠密深度圖。
    - **缺點：**
        - **尺度模糊性 (Scale Ambiguity):** 無論是 SfM/SLAM 還是學習的方法，通常只能得到相對深度或尺度未定的三維結構，無法確定絕對大小（除非有額外信息）。
        - SfM/SLAM 需要相機運動，且對運動模式和場景紋理有要求。
        - 基於學習的方法嚴重依賴訓練數據的質量和覆蓋範圍，泛化能力有限，且精度通常低於雙目或主動方法。
        - Shape-from-X 方法假設條件苛刻，實用性有限。

**三、 其他相關方法（簡提）**

- **激光三角測量 (Laser Triangulation):** 類似結構光，但通常投射的是單個激光點或線條，通過相機觀察點或線條在物體表面的位置變化來進行三角測量。常用於高精度的工業掃描。
- **干涉測量 (Interferometry):** 利用光的干涉原理進行極高精度的表面形貌測量，通常用於微觀尺度或精密計量。

**總結:**

深度估計的方法多種多樣，主要可分為主動和被動兩大類。

- **主動方法**（結構光、ToF/LiDAR）通過發射能量直接測量，通常精度較高，對物體表面紋理不敏感，但在成本、功耗、對環境光或特定表面的敏感性方面各有優劣。
- **被動方法**（雙目、單目）依賴環境光和相機成像，成本相對較低，但雙目視覺在弱紋理區域存在匹配困難，單目視覺則面臨尺度模糊性和對運動或學習先驗的依賴。

選擇哪種深度估計方法，需要根據具體的應用場景、精度要求、成本預算、測量範圍、環境條件、實時性需求等因素綜合考慮。