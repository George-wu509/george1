




用一個 3x3 影像具體說明衡量影像品質的 SSIM 和 PSNR 指標的例子：

**SSIM (結構相似性指標)**

SSIM 比較兩個影像的亮度、對比度和結構的相似程度。它的值介於 -1 和 1 之間，1 表示完美相似。

假設我們有兩個 3x3 的灰度影像：

- 影像 A (原始影像):
    
    ```
    [[100, 120, 140],
     [110, 130, 150],
     [120, 140, 160]]
    ```
    
- 影像 B (失真影像):
    
    ```
    [[101, 118, 142],
     [109, 132, 148],
     [122, 138, 161]]
    ```
    

計算 SSIM 的過程比較複雜，包含計算局部均值、標準差和協方差。 簡單來說，SSIM 會評估這兩個影像在結構上的相似度。在這個例子中，A 和 B 非常相似，所以 SSIM 值會接近 1。

![[Pasted image 20250520022248.png]]

**PSNR (峰值信噪比)**

PSNR 衡量的是訊號的最大可能功率與影響訊號表示精度的失真雜訊功率之比。PSNR 值越高，代表失真越小，影像品質越好。PSNR 通常以分貝 (dB) 為單位。

![[Pasted image 20250520022836.png]]

**總結**

- 在這個 3x3 的例子中，由於影像 A 和 B 非常相似，SSIM 值會接近 1，而 PSNR 值會很高。
- 實際應用中，影像通常比 3x3 大得多，計算過程也更複雜，但基本原理是一樣的。
- SSIM 更符合人眼對影像品質的感知，而 PSNR 更多的是數學上的衡量。



好的，以下是 SSIM 和 PSNR 指標的數學公式：

**PSNR (峰值信噪比) Peak Signal-to-Noise Ratio**

PSNR 的計算基於均方誤差 (Mean Squared Error, MSE)。

1. **均方誤差 (MSE)**: 假設有兩個 m×n 的單色影像 I (原始影像) 和 K (失真或重建影像)，MSE 的定義如下： MSE=mn1​i=0∑m−1​j=0∑n−1​[I(i,j)−K(i,j)]2 其中：
    
    - I(i,j) 是原始影像在像素位置 (i,j) 的值。
    - K(i,j) 是失真影像在像素位置 (i,j) 的值。
    - m 和 n 分別是影像的高度和寬度。
2. **峰值信噪比 (PSNR)**: PSNR 的定義如下： PSNR=10⋅log10​(MSEMAXI2​​) 或者也可以寫成： PSNR=20⋅log10​(MSE![](data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
    c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
    c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
    c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
    s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
    c69,-144,104.5,-217.7,106.5,-221
    l0 -0
    c5.3,-9.3,12,-14,20,-14
    H400000v40H845.2724
    s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
    c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
    M834 80h400000v40h-400000z"></path></svg>)​MAXI​​) 其中：
    
    - MAXI​ 是影像像素值的最大可能值。如果像素用 B 位元表示，則 MAXI​=2B−1。例如，對於 8 位元灰階影像，MAXI​=28−1=255。
    
    PSNR 的單位是分貝 (dB)。PSNR 值越高，表示失真越小，影像品質越好。
    

**SSIM (結構相似性指標) Structural Similarity Index Measure**

SSIM 衡量兩個影像之間的結構相似性，它從亮度 (luminance)、對比度 (contrast) 和結構 (structure) 三個方面進行比較。

對於兩個影像視窗 x 和 y：

1. **亮度比較 (Luminance Comparison)**: l(x,y)=μx2​+μy2​+C1​2μx​μy​+C1​​ 其中：
    
    - μx​ 是視窗 x 的平均值。
    - μy​ 是視窗 y 的平均值。
    - C1​=(K1​L)2 是一個常數，用於避免分母為零，L 是像素值的動態範圍 (例如，對於 8 位元影像，L=255)，K1​ 是一個很小的常數 (通常 K1​=0.01)。
2. **對比度比較 (Contrast Comparison)**: c(x,y)=σx2​+σy2​+C2​2σx​σy​+C2​​ 其中：
    
    - σx​ 是視窗 x 的標準差。
    - σy​ 是視窗 y 的標準差。
    - C2​=(K2​L)2 是另一個常數，用於避免分母為零，K2​ 是一個很小的常數 (通常 K2​=0.03)。
3. **結構比較 (Structure Comparison)**: s(x,y)=σx​σy​+C3​σxy​+C3​​ 其中：
    
    - σxy​ 是視窗 x 和 y 之間的協方差。
    - C3​=C2​/2 (在實際應用中，通常 C3​ 被設為 C2​/2)。
4. **SSIM 指數**: SSIM 指數是這三個比較的乘積： SSIM(x,y)=[l(x,y)]α⋅[c(x,y)]β⋅[s(x,y)]γ 其中 α,β,γ 是大於 0 的參數，用於調整三個分量的相對重要性。通常情況下，為了簡化，設 α=β=γ=1，則公式變為： SSIM(x,y)=(μx2​+μy2​+C1​)(σx2​+σy2​+C2​)(2μx​μy​+C1​)(2σxy​+C2​)​
    
    在實際應用中，SSIM 通常是在影像的局部視窗上計算，然後對所有視窗的 SSIM 值取平均，得到整個影像的平均 SSIM (MSSIM)。
    

SSIM 的值範圍通常在 -1 到 1 之間。值為 1 表示兩個影像完全相同。

這些是衡量影像品質的 PSNR 和 SSIM 指標的標準數學公式。它們在影像處理和電腦視覺領域被廣泛使用。