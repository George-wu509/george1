Lintcode 397
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ˆä¸‹æ ‡ä»Â `0`Â åˆ°Â `n-1`ï¼ŒÂ `n`Â è¡¨ç¤ºæ•´ä¸ªæ•°ç»„çš„è§„æ¨¡ï¼‰ï¼Œè¯·æ‰¾å‡ºè¯¥æ•°ç»„ä¸­çš„æœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—ã€‚ï¼ˆæœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—å¯ä»¥å®šä¹‰ä¸ºä»å³åˆ°å·¦æˆ–ä»å·¦åˆ°å³çš„åºåˆ—ã€‚ï¼‰

**æ ·ä¾‹ 1ï¼š**
```python
"""
è¾“å…¥ï¼š[5, 4, 2, 1, 3]
è¾“å‡ºï¼š4
è§£é‡Šï¼š
ç»™å®š [5, 4, 2, 1, 3]ï¼Œå…¶æœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—ï¼ˆLICSï¼‰ä¸º [5, 4, 2, 1]ï¼Œè¿”å› 4ã€‚
```
**æ ·ä¾‹ 2ï¼š**
```python
"""
è¾“å…¥ï¼š[1, 5, 2, 3, 4]
è¾“å‡ºï¼š3
è§£é‡Šï¼š
ç»™å®š [1, 5, 2, 3, 4]ï¼Œå…¶æœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—ï¼ˆLICSï¼‰ä¸º [2, 3, 4]ï¼Œè¿”å› 3ã€‚
```

```python
    def longest_increasing_continuous_subsequence(self, a):
        if not a:
            return 0
        longest, incr, desc = 1, 1, 1
        for i in range(1, len(a)):
            if a[i] > a[i - 1]:
                incr += 1
                desc = 1
            elif a[i] < a[i - 1]:
                incr = 1
                desc += 1
            else:
                incr = 1
                desc = 1
            longest = max(longest, max(incr, desc))
            
        return longest
```
pass
nums = [1,5,2,3,4]
è§£é‡‹: 
step1: å¾é ­åˆ°å°¾éæ­·nums, ä¸¦æ–°å¢incrè·Ÿdesc. 
step2: å¦‚æœæœ‰é€£çºŒå¢åŠ çš„è­¬å¦‚2->3->4, å‰‡incré€£çºŒåŠ 1. å¦‚æœè®Šæˆæ¸›å°‘å‰‡incrè®Šæˆ1


## **LintCode 367ï¼šæœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—**

---

### **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `a`ï¼Œæ‰¾åˆ° **æœ€é•¿ä¸Šå‡æˆ–ä¸‹é™çš„è¿ç»­å­åºåˆ—** çš„é•¿åº¦ã€‚

#### **ç¤ºä¾‹**

`è¾“å…¥: a = [5, 1, 2, 3, 4] è¾“å‡º: 4`

**è§£é‡Š**ï¼š

- **æœ€é•¿ä¸Šå‡è¿ç»­å­åºåˆ—** æ˜¯ `[1, 2, 3, 4]`ï¼Œé•¿åº¦ä¸º `4`ã€‚
- **æœ€é•¿ä¸‹é™è¿ç»­å­åºåˆ—** æ˜¯ `[5, 1]`ï¼Œé•¿åº¦ä¸º `2`ã€‚
- è¿”å› **4**ã€‚

---

## **è§£æ³•ï¼šåŒæŒ‡é’ˆ**

### **æ ¸å¿ƒæ€è·¯**

1. **ç»´æŠ¤ä¸¤ä¸ªå˜é‡**
    
    - `incr`ï¼šå½“å‰**ä¸Šå‡**çš„è¿ç»­å­åºåˆ—é•¿åº¦ã€‚
    - `desc`ï¼šå½“å‰**ä¸‹é™**çš„è¿ç»­å­åºåˆ—é•¿åº¦ã€‚
2. **éå†æ•°ç»„**
    
    - **è‹¥ `a[i] > a[i-1]`**ï¼šä¸Šå‡åºåˆ—ç»§ç»­å¢é•¿ï¼Œ`incr += 1`ï¼Œä½† `desc` å½’ 1ã€‚
    - **è‹¥ `a[i] < a[i-1]`**ï¼šä¸‹é™åºåˆ—ç»§ç»­å¢é•¿ï¼Œ`desc += 1`ï¼Œä½† `incr` å½’ 1ã€‚
    - **è‹¥ `a[i] == a[i-1]`**ï¼šæ—¢ä¸æ˜¯ä¸Šå‡ä¹Ÿä¸æ˜¯ä¸‹é™ï¼Œéƒ½å½’ 1ã€‚
3. **æ›´æ–°æœ€é•¿é•¿åº¦**
    
    - æ¯æ¬¡æ›´æ–° `longest = max(longest, max(incr, desc))`ã€‚

---

## **ä»£ç è§£æ**
```python
def longest_increasing_continuous_subsequence(self, a):
    if not a:
        return 0

    longest = 1  # è®°å½•æœ€é•¿å­åºåˆ—é•¿åº¦
    incr = 1  # è®°å½•å½“å‰ä¸Šå‡è¿ç»­å­åºåˆ—é•¿åº¦
    desc = 1  # è®°å½•å½“å‰ä¸‹é™è¿ç»­å­åºåˆ—é•¿åº¦

    for i in range(1, len(a)):
        if a[i] > a[i - 1]:  # ä¸Šå‡æƒ…å†µ
            incr += 1
            desc = 1  # ä¸‹é™é‡ç½®
        elif a[i] < a[i - 1]:  # ä¸‹é™æƒ…å†µ
            desc += 1
            incr = 1  # ä¸Šå‡é‡ç½®
        else:  # ç›¸ç­‰æƒ…å†µ
            incr = 1
            desc = 1

        longest = max(longest, max(incr, desc))  # æ›´æ–°æœ€é•¿é•¿åº¦

    return longest

```

---

## **é€æ­¥æ‰§è¡Œåˆ†æ**

**è¾“å…¥**

python

è¤‡è£½ç·¨è¼¯

`a = [5, 1, 2, 3, 4]`

|`i`|`a[i]`|`a[i-1]`|`incr`|`desc`|`longest`|è§£é‡Š|
|---|---|---|---|---|---|---|
|0|5|-|1|1|1|åˆå§‹å€¼|
|1|1|5|1|2|2|ä¸‹é™ `[5,1]`|
|2|2|1|2|1|2|ä¸Šå‡ `[1,2]`|
|3|3|2|3|1|3|ä¸Šå‡ `[1,2,3]`|
|4|4|3|4|1|4|ä¸Šå‡ `[1,2,3,4]`|

æœ€ç»ˆè¿”å› `4`ã€‚

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

4. **æ—¶é—´å¤æ‚åº¦**
    
    - éå†æ•°ç»„ä¸€æ¬¡ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º **`O(n)`**ã€‚
5. **ç©ºé—´å¤æ‚åº¦**
    
    - åªä½¿ç”¨äº†å‡ ä¸ªé¢å¤–çš„å˜é‡ï¼Œç©ºé—´å¤æ‚åº¦ä¸º **`O(1)`**ã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰**

- å®šä¹‰ `dp[i]` ä¸º**ä»¥ `a[i]` ç»“å°¾**çš„æœ€é•¿ä¸Šå‡ï¼ˆæˆ–ä¸‹é™ï¼‰è¿ç»­å­åºåˆ—é•¿åº¦ã€‚
- é€’æ¨å…³ç³»ï¼š
    - `dp_inc[i] = dp_inc[i-1] + 1 if a[i] > a[i-1] else 1`
    - `dp_desc[i] = dp_desc[i-1] + 1 if a[i] < a[i-1] else 1`
- **æ—¶é—´å¤æ‚åº¦ `O(n)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(n)`ï¼ˆå¯ä¼˜åŒ–ä¸º `O(1)`)**ã€‚

---

### **2. åŒæŒ‡é’ˆï¼ˆèµ·ç‚¹è®°å½•ï¼‰**

- ç»´æŠ¤ `start` æŒ‡é’ˆè®°å½•å½“å‰ä¸Šå‡æˆ–ä¸‹é™çš„èµ·ç‚¹ï¼š
    - **è‹¥ `a[i] > a[i-1]`**ï¼šç»§ç»­ä¸Šå‡ã€‚
    - **è‹¥ `a[i] < a[i-1]`**ï¼šç»§ç»­ä¸‹é™ã€‚
    - **å¦åˆ™ï¼Œæ›´æ–° `start` ä½ç½®**ã€‚
- è®¡ç®— `i - start + 1` å¹¶æ›´æ–°æœ€å¤§é•¿åº¦ã€‚

**ä»£ç **
```python
def longest_increasing_continuous_subsequence(self, a):
    if not a:
        return 0

    max_length = 1
    start = 0  # è®°å½•å½“å‰åŒºé—´èµ·ç‚¹
    for i in range(1, len(a)):
        if a[i] == a[i - 1]:
            start = i  # é‡æ–°è®¡ç®—
        max_length = max(max_length, i - start + 1)

    return max_length

```
- **æ—¶é—´å¤æ‚åº¦ `O(n)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(1)`**ã€‚

---

## **æ€»ç»“**

|æ–¹æ³•|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|
|**åŒæŒ‡é’ˆï¼ˆæœ€ä½³è§£æ³•ï¼‰**|`O(n)`|`O(1)`|æœ€ä¼˜|
|åŠ¨æ€è§„åˆ’|`O(n)`|`O(n)`|å¯ä¼˜åŒ–ä¸º `O(1)`|
|åŒæŒ‡é’ˆï¼ˆèµ·ç‚¹è®°å½•ï¼‰|`O(n)`|`O(1)`|ç®€æ´ï¼Œé€‚ç”¨äºä¸€èˆ¬æƒ…å†µ|

ğŸš€ **åŒæŒ‡é’ˆæ³•æ˜¯æœ€ä¼˜è§£ï¼Œæ—¶é—´ `O(n)`ï¼Œç©ºé—´ `O(1)`ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼**