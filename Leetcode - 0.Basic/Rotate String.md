Lintcode 8
ç»™å®šä¸€ä¸ªå­—ç¬¦æ•°ç»„Â `s`Â å’Œä¸€ä¸ªåç§»é‡ï¼Œæ ¹æ®åç§»é‡**åŸåœ°æ—‹è½¬**å­—ç¬¦æ•°ç»„(ä»å·¦å‘å³æ—‹è½¬)ã€‚

**æ ·ä¾‹ 1ï¼š**
è¾“å…¥ï¼š
```python
"""
s = "abcdefg"
offset = 3
```
è¾“å‡ºï¼š
```python
"""
"efgabcd"
```
è§£é‡Š
æ³¨æ„æ˜¯**åŸåœ°æ—‹è½¬**ï¼Œå³ s æ—‹è½¬åä¸º"efgabcd"

**æ ·ä¾‹ 2ï¼š**
è¾“å…¥ï¼š
```python
"""
s = "abcdefg"
offset = 0
```
è¾“å‡ºï¼š
```python
"""
"abcdefg"
```
è§£é‡Šï¼š
æ³¨æ„æ˜¯**åŸåœ°æ—‹è½¬**ï¼Œå³ s æ—‹è½¬åä¸º"abcdefg"

**æ ·ä¾‹ 3ï¼š**
è¾“å…¥ï¼š
```python
"""
s = "abcdefg"
offset = 1
```
è¾“å‡ºï¼š
```python
"gabcdef"
```
è§£é‡Šï¼š
æ³¨æ„æ˜¯**åŸåœ°æ—‹è½¬**ï¼Œå³ s æ—‹è½¬åä¸º"gabcdef"

**æ ·ä¾‹ 4ï¼š**
è¾“å…¥ï¼š
```python
s = "abcdefg"
offset = 2
```
è¾“å‡ºï¼š
```python
"fgabcde"
```
è§£é‡Šï¼š
æ³¨æ„æ˜¯**åŸåœ°æ—‹è½¬**ï¼Œå³ s æ—‹è½¬åä¸º"fgabcde"

**æ ·ä¾‹ 5ï¼š**
è¾“å…¥ï¼š
```python
s = "abcdefg"
offset = 10
```
è¾“å‡ºï¼š
```python
"efgabcd"
```
è§£é‡Šï¼š
æ³¨æ„æ˜¯**åŸåœ°æ—‹è½¬**ï¼Œå³ s æ—‹è½¬åä¸º"efgabcd"

æœ€ä½³è§£æ³•: æ—‹è½‰æ³•
```python
class Solution:
    def rotateString(self, s, offset):
        if len(s) == 0:
            return

        offset = offset % len(s)  # å¤„ç†è¶Šç•Œ

        # åè½¬æ•´ä¸ªæ•°ç»„
        s.reverse()

        # åè½¬å‰ offset ä¸ªå­—ç¬¦
        s[:offset] = reversed(s[:offset])

        # åè½¬å‰©ä½™éƒ¨åˆ†
        s[offset:] = reversed(s[offset:])
```


```python
class Solution:
    # @param s: a list of char
    # @param offset: an integer 
    # @return: nothing
    def rotateString(self, s, offset):
        if len(s) > 0:
            offset = offset % len(s)
            
        temp = (s + s)[len(s) - offset : 2 * len(s) - offset]

        for i in range(len(temp)):
            s[i] = temp[i]
```
pass

# **LintCode 8: Rotate Stringï¼ˆæ—‹è½¬å­—ç¬¦ä¸²ï¼‰**

---

## **é—®é¢˜æè¿°**

ç»™å®šä¸€ä¸ªå­—ç¬¦æ•°ç»„ `s` å’Œä¸€ä¸ªæ•´æ•° `offset`ï¼Œå°† `s` **å‘å³æ—‹è½¬ `offset` ä½**ï¼ˆå³å `offset` ä¸ªå­—ç¬¦ç§»åŠ¨åˆ°å‰é¢ï¼‰ï¼Œå¹¶ **åŸåœ°ä¿®æ”¹ `s`**ã€‚

---

## **ç¤ºä¾‹**

`è¾“å…¥: s = ['a', 'b', 'c', 'd', 'e'] offset = 2  è¾“å‡º: s = ['d', 'e', 'a', 'b', 'c']`

**è§£é‡Š**

`åˆå§‹: ['a', 'b', 'c', 'd', 'e'] æ—‹è½¬ 2 æ¬¡: ['d', 'e', 'a', 'b', 'c']`

---

## **è§£æ³•ï¼šæ‹¼æ¥å­—ç¬¦ä¸²**

### **æ ¸å¿ƒæ€è·¯**

1. **å¤„ç† `offset` è¶Šç•Œ**
    
    - `offset` å¯èƒ½å¤§äº `s` é•¿åº¦ï¼Œåªéœ€è¦æ—‹è½¬ `offset % len(s)`ï¼š offset=offsetmodâ€‰â€‰len(s)\text{offset} = \text{offset} \mod \text{len(s)}offset=offsetmodlen(s)
    - ä¾‹å¦‚ï¼š

        `s = ['a', 'b', 'c', 'd', 'e'] offset = 7 offset = 7 % 5 = 2  # åªéœ€æ—‹è½¬ 2 ä½`
        
2. **åˆ©ç”¨ `s + s` æ‹¼æ¥**
    
    - **å¤åˆ¶ `s` ä¸¤æ¬¡**ï¼Œå½¢æˆ `s + s`ï¼Œä¾‹å¦‚ï¼š

        `s = ['a', 'b', 'c', 'd', 'e'] s + s = ['a', 'b', 'c', 'd', 'e', 'a', 'b', 'c', 'd', 'e']`
        
    - **å–å‡º `offset` éƒ¨åˆ†**

        `temp = (s + s)[len(s) - offset : 2 * len(s) - offset]`

        `temp = ['d', 'e', 'a', 'b', 'c']`
        
3. **èµ‹å€¼å› `s`**
    
    - éå† `temp`ï¼Œé€ä¸ªèµ‹å€¼å› `s[i]`ï¼Œå®ç°**åŸåœ°ä¿®æ”¹**ã€‚

---

## **ä»£ç è§£æ**
```python
class Solution:
    # @param s: a list of char
    # @param offset: an integer 
    # @return: nothing
    def rotateString(self, s, offset):
        if len(s) > 0:
            offset = offset % len(s)  # å¤„ç† offset è¿‡å¤§æƒ…å†µ
            
        temp = (s + s)[len(s) - offset : 2 * len(s) - offset]  # è·å–æ—‹è½¬åçš„éƒ¨åˆ†

        for i in range(len(temp)):  # èµ‹å€¼å› s
            s[i] = temp[i]

```

---

## **æ‰§è¡Œè¿‡ç¨‹**

`s = ['a', 'b', 'c', 'd', 'e'] offset = 2`

---

### **Step 1: è®¡ç®— `offset % len(s)`**

`offset = 2 % 5 = 2`

`offset` **å°äº `s` é•¿åº¦ï¼Œæ— éœ€å˜åŒ–**ã€‚

---

### **Step 2: å¤åˆ¶ `s` å¹¶æˆªå–æ—‹è½¬éƒ¨åˆ†**

`s + s = ['a', 'b', 'c', 'd', 'e', 'a', 'b', 'c', 'd', 'e'] temp = (s + s)[5 - 2 : 10 - 2] = (s + s)[3:8]`

å¾—åˆ°ï¼š

`temp = ['d', 'e', 'a', 'b', 'c']`

---

### **Step 3: èµ‹å€¼ `temp` åˆ° `s`**

`s[0] = 'd' s[1] = 'e' s[2] = 'a' s[3] = 'b' s[4] = 'c'`

æœ€ç»ˆ `s` å˜ä¸ºï¼š

`s = ['d', 'e', 'a', 'b', 'c']`

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

|æ“ä½œ|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|
|---|---|---|
|è®¡ç®— `offset % len(s)`|`O(1)`|`O(1)`|
|å¤åˆ¶ `s + s`|`O(n)`|`O(n)`|
|å– `temp = (s + s)[...]`|`O(n)`|`O(n)`|
|èµ‹å€¼ `s[i] = temp[i]`|`O(n)`|`O(1)`|
|**æ€»å¤æ‚åº¦**|`O(n)`|`O(n)`|

### **ä¼˜åŒ–ç©ºé—´**

ç”±äº `s + s` **é¢å¤–ä½¿ç”¨ `O(n)` ç©ºé—´**ï¼Œå¯ä»¥ç”¨ **åŸåœ°æ—‹è½¬** æ–¹æ³•ä¼˜åŒ– **ç©ºé—´åˆ° `O(1)`**ã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. åè½¬æ³•ï¼ˆæœ€ä½³è§£æ³•ï¼Œ`O(n)` æ—¶é—´ï¼Œ`O(1)` ç©ºé—´ï¼‰**

- **æ€è·¯**
    
    1. **åè½¬æ•´ä¸ªæ•°ç»„**
    2. **åè½¬å‰ `offset` ä¸ªå­—ç¬¦**
    3. **åè½¬å‰©ä½™éƒ¨åˆ†**
```python
s = ['a', 'b', 'c', 'd', 'e']
offset = 2
1. åè½¬æ•´ä¸ªæ•°ç»„: ['e', 'd', 'c', 'b', 'a']
2. åè½¬å‰ offset ä¸ªå­—ç¬¦: ['d', 'e', 'c', 'b', 'a']
3. åè½¬å‰©ä½™éƒ¨åˆ†: ['d', 'e', 'a', 'b', 'c']

```
        
```python
class Solution:
    def rotateString(self, s, offset):
        if len(s) == 0:
            return

        offset = offset % len(s)  # å¤„ç†è¶Šç•Œ

        # åè½¬æ•´ä¸ªæ•°ç»„
        s.reverse()

        # åè½¬å‰ offset ä¸ªå­—ç¬¦
        s[:offset] = reversed(s[:offset])

        # åè½¬å‰©ä½™éƒ¨åˆ†
        s[offset:] = reversed(s[offset:])

```

ä¸ç”¨æ•¸çµ„çš„reverse function:
```python
def reverse(s, start, end):
  """
  åŸåœ°åè½‰åˆ—è¡¨ s å¾ç´¢å¼• start åˆ° end (åŒ…å« end) çš„éƒ¨åˆ†
  """
  while start < end:
    s[start], s[end] = s[end], s[start]
    start += 1
    end -= 1

def rotate_string(s, offset):
  """
  åŸåœ°å‘å³æ—‹è½‰å­—å…ƒé™£åˆ— s offset ä½
  :param s: å­—å…ƒåˆ—è¡¨
  :param offset: åç§»é‡
  """
  if not s or len(s) == 0 or offset is None:
    return # è™•ç†ç©ºåˆ—è¡¨æˆ–ç„¡æ•ˆè¼¸å…¥

  n = len(s)
  k = offset % n # è¨ˆç®—æœ‰æ•ˆåç§»é‡

  if k == 0:
    return # å¦‚æœåç§»é‡æ˜¯é•·åº¦çš„å€æ•¸ï¼Œå‰‡ç„¡éœ€æ—‹è½‰

  # æ­¥é©Ÿ 1: åè½‰æ•´å€‹é™£åˆ—
  reverse(s, 0, n - 1)
  # print(f"After step 1 (reverse all): {s}") # ç”¨æ–¼é™¤éŒ¯

  # æ­¥é©Ÿ 2: åè½‰å‰ k å€‹å…ƒç´ 
  reverse(s, 0, k - 1)
  # print(f"After step 2 (reverse first k): {s}") # ç”¨æ–¼é™¤éŒ¯

  # æ­¥é©Ÿ 3: åè½‰å‰©ä¸‹çš„ n-k å€‹å…ƒç´ 
  reverse(s, k, n - 1)
  # print(f"After step 3 (reverse last n-k): {s}") # ç”¨æ–¼é™¤éŒ¯
```

---

### **2. åŒæŒ‡é’ˆæ»‘åŠ¨çª—å£**

- **æ€è·¯**
    - ç”¨ **åŒæŒ‡é’ˆ** äº¤æ¢å…ƒç´ ï¼Œä»åå¾€å‰é€ä¸ªç§»åŠ¨ `offset` ä½ã€‚
- **å¤æ‚åº¦**
    - æ—¶é—´å¤æ‚åº¦ `O(n)`
    - ç©ºé—´å¤æ‚åº¦ `O(1)`
```python
    class Solution:
    def rotateString(self, s, offset):
        if len(s) == 0:
            return

        offset = offset % len(s)
        for _ in range(offset):
            last = s[-1]
            for i in range(len(s) - 1, 0, -1):
                s[i] = s[i - 1]
            s[0] = last

```

---

## **æ–¹æ³•æ¯”è¾ƒ**

|æ–¹æ³•|æ€è·¯|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|---|
|**æ‹¼æ¥å­—ç¬¦ä¸²ï¼ˆå½“å‰è§£æ³•ï¼‰**|`s + s` å– `offset` éƒ¨åˆ†|`O(n)`|`O(n)`|**é€‚ç”¨äºä¸å¯ä¿®æ”¹ `s` çš„æƒ…å†µ**|
|**åè½¬æ³•ï¼ˆæœ€ä½³è§£æ³•ï¼‰**|**ä¸‰æ¬¡åè½¬** å®ç°æ—‹è½¬|`O(n)`|`O(1)`|**é€‚ç”¨äºå¤§æ•°æ®é‡ `s`**|
|**åŒæŒ‡é’ˆæ»‘åŠ¨çª—å£**|**é€ä¸ªåç§» `offset`**|`O(n * offset)`|`O(1)`|**å°è§„æ¨¡ `offset` é€‚ç”¨**|

ğŸš€ **åè½¬æ³• (`O(n)` æ—¶é—´, `O(1)` ç©ºé—´) æ˜¯æœ€ä¼˜è§£ï¼**





```python
    def rotateString1(self, s, offset):
        if len(s) == 0:
            return
        offset = offset % len(s)
        s.reverse()
        s[:offset] = reversed(s[:offset])
        s[offset:] = reversed(s[offset:])

    def rotateString2(self, s, offset):
        if len(s) == 0:
            return
	s = [s[-1-offset:-1], s[0:-2-offset]]
```

åªæœ‰ **`rotateString1`** ç¬¦åˆåŸåœ°æ—‹è½¬å­—ç¬¦æ•°ç»„çš„è¦æ±‚ã€‚`rotateString2` çš„å®ç°**ä¸æ˜¯åŸåœ°æ—‹è½¬**ï¼Œè€Œæ˜¯åˆ›å»ºäº†æ–°çš„åˆ—è¡¨åˆ‡ç‰‡ï¼Œå¹¶æ²¡æœ‰ç›´æ¥ä¿®æ”¹åŸå§‹çš„å­—ç¬¦æ•°ç»„ `s`ã€‚

**ä¸­æ–‡è§£é‡Šï¼š**

**`rotateString1` çš„è§£é‡Šï¼š**

è¿™ä¸ªæ–¹æ³•é€šè¿‡ä¸€ç³»åˆ—å·§å¦™çš„åˆ—è¡¨åè½¬æ“ä½œæ¥å®ç°åŸåœ°æ—‹è½¬ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥åˆ†è§£ï¼š

1. **`if len(s) == 0: return`**: å¦‚æœå­—ç¬¦æ•°ç»„ä¸ºç©ºï¼Œåˆ™æ— éœ€æ—‹è½¬ï¼Œç›´æ¥è¿”å›ã€‚
    
2. **`offset = offset % len(s)`**: è¿™ä¸€æ­¥éå¸¸é‡è¦ã€‚å®ƒé€šè¿‡å–åç§»é‡ `offset` å¯¹æ•°ç»„é•¿åº¦çš„æ¨¡ï¼ˆä½™æ•°ï¼‰ï¼Œç¡®ä¿åç§»é‡å§‹ç»ˆåœ¨ `[0, len(s) - 1]` çš„èŒƒå›´å†…ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ•°ç»„é•¿åº¦æ˜¯ 7ï¼Œåç§»é‡æ˜¯ 10ï¼Œé‚£ä¹ˆå®é™…åªéœ€è¦æ—‹è½¬ 10 % 7 = 3 ä½ã€‚è¿™é¿å…äº†ä¸å¿…è¦çš„å¤šæ¬¡å®Œæ•´æ—‹è½¬ã€‚
    
3. **`s.reverse()`**: è¿™ä¸€æ­¥å°†æ•´ä¸ªå­—ç¬¦æ•°ç»„ `s` **åŸåœ°åè½¬**ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `s` æ˜¯ `['a', 'b', 'c', 'd', 'e']`ï¼Œåè½¬åå˜æˆ `['e', 'd', 'c', 'b', 'a']`ã€‚
    
4. **`s[:offset] = reversed(s[:offset])`**: è¿™ä¸€æ­¥å°†æ•°ç»„çš„å‰ `offset` ä¸ªå­—ç¬¦ï¼ˆéœ€è¦ç§»åŠ¨åˆ°å°¾éƒ¨çš„éƒ¨åˆ†ï¼‰è¿›è¡Œ**åŸåœ°åè½¬**ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ `offset` æ˜¯ 2ï¼Œé‚£ä¹ˆ `s[:2]` æ˜¯ `['e', 'd']`ï¼Œåè½¬åå˜æˆ `['d', 'e']`ã€‚æ­¤æ—¶ `s` å˜æˆäº† `['d', 'e', 'c', 'b', 'a']`ã€‚
    
5. **`s[offset:] = reversed(s[offset:])`**: è¿™ä¸€æ­¥å°†æ•°ç»„ä»ç´¢å¼• `offset` å¼€å§‹åˆ°æœ«å°¾çš„å­—ç¬¦ï¼ˆåŸæœ¬åœ¨æ•°ç»„å‰éƒ¨çš„éƒ¨åˆ†ï¼Œç°åœ¨åœ¨ä¸­é—´ï¼‰è¿›è¡Œ**åŸåœ°åè½¬**ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`s[2:]` æ˜¯ `['c', 'b', 'a']`ï¼Œåè½¬åå˜æˆ `['a', 'b', 'c']`ã€‚æœ€ç»ˆï¼Œ`s` å˜æˆäº† `['d', 'e', 'a', 'b', 'c']`ï¼Œè¿™æ­£æ˜¯å°†åŸå§‹æ•°ç»„ `['a', 'b', 'c', 'd', 'e']` å‘å³æ—‹è½¬ 2 ä½çš„ç»“æœã€‚
    

**å…³é”®åœ¨äºï¼Œ`s.reverse()` å’Œå¯¹åˆ‡ç‰‡ä½¿ç”¨ `reversed()` å¹¶èµ‹å€¼å›åŸåˆ‡ç‰‡ (`s[:offset] = ...`, `s[offset:] = ...`) éƒ½æ˜¯åœ¨åŸå§‹çš„ `s` åˆ—è¡¨ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œå®ç°äº†åŸåœ°æ“ä½œã€‚**

**`rotateString2` çš„è§£é‡Šï¼š**

1. **`if len(s) == 0: return`**: å¦‚æœå­—ç¬¦æ•°ç»„ä¸ºç©ºï¼Œåˆ™æ— éœ€æ—‹è½¬ï¼Œç›´æ¥è¿”å›ã€‚
    
2. **`s = [s[-1-offset:-1], s[0:-2-offset]]`**: è¿™ä¸€è¡Œä»£ç çš„é—®é¢˜åœ¨äºå®ƒ**åˆ›å»ºäº†åŒ…å«ä¸¤ä¸ªæ–°åˆ—è¡¨çš„åˆ—è¡¨ï¼Œå¹¶é‡æ–°èµ‹å€¼ç»™äº† `s`**ã€‚
    
    - `s[-1-offset:-1]`: è¿™éƒ¨åˆ†å°è¯•ä» `s` çš„å°¾éƒ¨æˆªå–ä¸€éƒ¨åˆ†å…ƒç´ ã€‚
    - `s[0:-2-offset]`: è¿™éƒ¨åˆ†å°è¯•ä» `s` çš„å¤´éƒ¨æˆªå–ä¸€éƒ¨åˆ†å…ƒç´ ã€‚
    - **æœ€å…³é”®çš„æ˜¯ï¼Œ`s = [...]` è¿™ä¸€æ­¥åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„åˆ—è¡¨ï¼Œè€Œä¸æ˜¯åœ¨åŸæ¥çš„ `s` åˆ—è¡¨ä¸Šè¿›è¡Œä¿®æ”¹ã€‚** å› æ­¤ï¼Œè¿™ä¸æ˜¯åŸåœ°æ—‹è½¬ã€‚

**ä¸ºä»€ä¹ˆ `rotateString2` ä¸ç¬¦åˆåŸåœ°æ—‹è½¬çš„è¦æ±‚ï¼š**

åŸåœ°æ—‹è½¬æ„å‘³ç€åœ¨ä¸åˆ›å»ºé¢å¤–æ•°æ®ç»“æ„ï¼ˆåœ¨ç©ºé—´å¤æ‚åº¦ä¸Šé€šå¸¸è¦æ±‚ O(1) çš„é¢å¤–ç©ºé—´ï¼‰çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä¿®æ”¹è¾“å…¥çš„æ•°ç»„ã€‚`rotateString2` é€šè¿‡åˆ—è¡¨åˆ‡ç‰‡åˆ›å»ºäº†æ–°çš„åˆ—è¡¨ï¼Œå¹¶ç”¨è¿™ä¸ªæ–°åˆ—è¡¨æ›¿æ¢äº†åŸæ¥çš„ `s`ã€‚è¿™æ”¹å˜äº† `s` çš„å¼•ç”¨ï¼Œä½†å¹¶æ²¡æœ‰åœ¨åŸå§‹çš„å†…å­˜ç©ºé—´ä¸­è¿›è¡Œå…ƒç´ çš„ç§»åŠ¨å’Œä¿®æ”¹ã€‚

**æ€»ç»“ï¼š**

`rotateString1` é€šè¿‡ä¸€ç³»åˆ—çš„åè½¬æ“ä½œï¼Œå·§å¦™åœ°åœ¨åŸå§‹çš„å­—ç¬¦æ•°ç»„ `s` ä¸Šè¿›è¡Œäº†ä¿®æ”¹ï¼Œå®ç°äº†åŸåœ°æ—‹è½¬ã€‚`rotateString2` åˆ™åˆ›å»ºäº†æ–°çš„åˆ—è¡¨ï¼Œå¹¶æ²¡æœ‰æ»¡è¶³åŸåœ°æ—‹è½¬çš„è¦æ±‚ã€‚å› æ­¤ï¼Œ**`rotateString1` æ˜¯ç¬¦åˆé¢˜ç›®è¦æ±‚çš„è§£æ³•ã€‚**