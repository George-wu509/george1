
**æ ·ä¾‹1**
```python
è¾“å…¥: [1,2,3,4]
è¾“å‡º: [24,12,8,6]
è§£é‡Š:
2*3*4=24
1*3*4=12
1*2*4=8
1*2*3=6
```
**æ ·ä¾‹2**
```python
è¾“å…¥: [2,3,8]
è¾“å‡º: [24,16,6]
è§£é‡Š:
3*8=24
2*8=16
2*3=6
```


```python
def product_except_self(self, nums: List[int]) -> List[int]:
	# write your code here
	length = len(nums)
	answer = [0]*length
	
	# answer[i] è¡¨ç¤ºç´¢å¼• i å·¦ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
	# å› ä¸ºç´¢å¼•ä¸º '0' çš„å…ƒç´ å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼Œ æ‰€ä»¥ answer[0] = 1
	answer[0] = 1
	for i in range(1, length):
		answer[i] = nums[i - 1] * answer[i - 1]
	
	# R ä¸ºå³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯
	# åˆšå¼€å§‹å³è¾¹æ²¡æœ‰å…ƒç´ ï¼Œæ‰€ä»¥ R = 1
	R = 1;
	for i in reversed(range(length)):
		# å¯¹äºç´¢å¼• iï¼Œå·¦è¾¹çš„ä¹˜ç§¯ä¸º answer[i]ï¼Œå³è¾¹çš„ä¹˜ç§¯ä¸º R
		answer[i] = answer[i] * R
		# R éœ€è¦åŒ…å«å³è¾¹æ‰€æœ‰çš„ä¹˜ç§¯ï¼Œæ‰€ä»¥è®¡ç®—ä¸‹ä¸€ä¸ªç»“æœæ—¶éœ€è¦å°†å½“å‰å€¼ä¹˜åˆ° R ä¸Š
		R *= nums[i]
	
	return answer
```
pass


## **LintCode 1310ï¼šæ•°ç»„é™¤äº†è‡ªèº«çš„ä¹˜ç§¯**

---

### **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ `answer`ï¼Œå…¶ä¸­ `answer[i]` ç­‰äº **`nums` é™¤äº† `nums[i]` ä¹‹å¤–æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯**ã€‚

- ä¸èƒ½ä½¿ç”¨é™¤æ³• `"/"`ã€‚
- **ç¤ºä¾‹**

`è¾“å…¥: [1,2,3,4]  è¾“å‡º: [24,12,8,6]`

**è§£é‡Š**

è¤‡è£½ç·¨è¼¯

`answer[0] = 2 Ã— 3 Ã— 4 = 24 answer[1] = 1 Ã— 3 Ã— 4 = 12 answer[2] = 1 Ã— 2 Ã— 4 = 8 answer[3] = 1 Ã— 2 Ã— 3 = 6`

---

## **è§£æ³•ï¼šå‰ç¼€ä¹˜ç§¯ + åç¼€ä¹˜ç§¯ï¼ˆåŒæŒ‡é’ˆï¼‰**

### **æ ¸å¿ƒæ€è·¯**

1. **å‰ç¼€ä¹˜ç§¯ `answer[i]`**
    
    - `answer[i]` å­˜å‚¨çš„æ˜¯ **`nums[0]` åˆ° `nums[i-1]`** çš„ä¹˜ç§¯ï¼ˆå³ `nums[i]` å·¦ä¾§çš„ä¹˜ç§¯ï¼‰ã€‚
    - åˆå§‹åŒ– `answer[0] = 1`ï¼ˆå› ä¸º `nums[0]` å·¦ä¾§æ²¡æœ‰å…ƒç´ ï¼‰ã€‚
2. **åç¼€ä¹˜ç§¯ `R`**
    
    - `R` ä»£è¡¨ `nums[i]` **å³ä¾§æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯**ã€‚
    - é€†åºéå† `nums`ï¼Œæ¯æ¬¡æ›´æ–° `answer[i] = answer[i] * R`ï¼Œå†æ›´æ–° `R`ã€‚

---

### **ä»£ç è§£æ**
```python
def product_except_self(self, nums: List[int]) -> List[int]:
    length = len(nums)
    answer = [0] * length  # åˆå§‹åŒ–ç»“æœæ•°ç»„

    # è®¡ç®—å·¦ä¾§å‰ç¼€ä¹˜ç§¯
    answer[0] = 1
    for i in range(1, length):
        answer[i] = nums[i - 1] * answer[i - 1]

    # è®¡ç®—å³ä¾§ä¹˜ç§¯å¹¶æ›´æ–° answer
    R = 1  # å³ä¾§ä¹˜ç§¯åˆå§‹åŒ–ä¸º 1
    for i in reversed(range(length)):
        answer[i] = answer[i] * R  # ä¹˜ä¸Šå³ä¾§ä¹˜ç§¯
        R *= nums[i]  # æ›´æ–°å³ä¾§ä¹˜ç§¯

    return answer

```

---

## **é€æ­¥æ‰§è¡Œåˆ†æ**

### **è¾“å…¥**

`nums = [1,2,3,4]`

---

### **æ­¥éª¤ 1ï¼šè®¡ç®—å·¦ä¾§å‰ç¼€ä¹˜ç§¯**

|`i`|`nums[i]`|`answer[i]` (å·¦ä¾§ä¹˜ç§¯)|
|---|---|---|
|0|1|1|
|1|2|`1 Ã— 1 = 1`|
|2|3|`1 Ã— 2 = 2`|
|3|4|`1 Ã— 2 Ã— 3 = 6`|

æ­¤æ—¶ï¼š

`answer = [1, 1, 2, 6]`

---

### **æ­¥éª¤ 2ï¼šè®¡ç®—å³ä¾§ä¹˜ç§¯ `R`**

ä»å³å‘å·¦éå† `nums`ï¼š

|`i`|`nums[i]`|`R` (å³ä¾§ä¹˜ç§¯)|`answer[i]` (ä¹˜ä¸Š `R`)|
|---|---|---|---|
|3|4|1|`6 Ã— 1 = 6`|
|2|3|`4 Ã— 1 = 4`|`2 Ã— 4 = 8`|
|1|2|`3 Ã— 4 = 12`|`1 Ã— 12 = 12`|
|0|1|`2 Ã— 12 = 24`|`1 Ã— 24 = 24`|

æœ€ç»ˆ `answer = [24, 12, 8, 6]`ã€‚

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

1. **æ—¶é—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šéå† `nums` ä¸¤æ¬¡ï¼ˆè®¡ç®—å·¦ä¾§ + è®¡ç®—å³ä¾§ï¼‰ï¼Œå› æ­¤æ˜¯ `O(n)`ã€‚
2. **ç©ºé—´å¤æ‚åº¦**
    
    - **`O(1)`**ï¼ˆè‹¥ä¸è®¡ `answer` ä½œä¸ºè¾“å‡ºæ•°ç»„ï¼‰ã€‚
    - åªç”¨äº†ä¸€ä¸ªé¢å¤–å˜é‡ `R`ï¼Œæ‰€ä»¥æ˜¯ **å¸¸æ•°ç©ºé—´ `O(1)`**ã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. æš´åŠ›æ³• `O(n^2)`**

- éå† `nums`ï¼Œæ¯æ¬¡è®¡ç®— `nums[i]` é™¤äº†è‡ªèº«çš„ä¹˜ç§¯ã€‚
- **ç¼ºç‚¹**ï¼šæ—¶é—´å¤æ‚åº¦ **`O(n^2)`**ï¼Œå¯¹äºå¤§æ•°ç»„ä¸å¯è¡Œã€‚

### **2. ç›´æ¥å‰ç¼€ + åç¼€æ•°ç»„**

- ç»´æŠ¤ `left` å’Œ `right` ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å­˜å·¦ä¾§å’Œå³ä¾§ä¹˜ç§¯ã€‚
- **ç©ºé—´å¤æ‚åº¦ `O(n)`**ï¼Œå¯ä¼˜åŒ–ä¸º `O(1)`ã€‚
```python
def product_except_self(nums: List[int]) -> List[int]:
    length = len(nums)
    left = [1] * length
    right = [1] * length
    answer = [0] * length

    # è®¡ç®—å·¦ä¾§ä¹˜ç§¯
    for i in range(1, length):
        left[i] = left[i - 1] * nums[i - 1]

    # è®¡ç®—å³ä¾§ä¹˜ç§¯
    for i in range(length - 2, -1, -1):
        right[i] = right[i + 1] * nums[i + 1]

    # è®¡ç®—æœ€ç»ˆç»“æœ
    for i in range(length):
        answer[i] = left[i] * right[i]

    return answer

```

**æ—¶é—´å¤æ‚åº¦ `O(n)`ï¼Œç©ºé—´å¤æ‚åº¦ `O(n)`**ã€‚

---

## **æ–¹æ³•æ¯”è¾ƒ**

|æ–¹æ³•|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|
|**åŒæŒ‡é’ˆï¼ˆæœ€ä½³è§£æ³•ï¼‰**|`O(n)`|`O(1)`|**æœ€ä¼˜è§£**|
|æš´åŠ›æ³•|`O(n^2)`|`O(1)`|**æ•°æ®å°**|
|å‰ç¼€ & åç¼€æ•°ç»„|`O(n)`|`O(n)`|**é€‚ç”¨äºä¸èƒ½ä¿®æ”¹è¾“å…¥æ•°æ®çš„æƒ…å†µ**|

ğŸš€ **åŒæŒ‡é’ˆæ–¹æ³•æ˜¯æœ€ä¼˜è§£ï¼Œæ—¶é—´ `O(n)`ï¼Œç©ºé—´ `O(1)`ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®ï¼**