Lintcode 1844
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°kï¼Œä½ éœ€è¦æ‰¾åˆ°å’Œä¸ºkçš„æœ€çŸ­**éç©º**å­æ•°ç»„ï¼Œå¹¶è¿”å›å®ƒçš„é•¿åº¦ã€‚
å¦‚æœæ²¡æœ‰è¿™æ ·çš„å­æ•°ç»„ï¼Œè¿”å›-1.
**æ ·ä¾‹1ï¼š**
```python
è¾“å…¥: 
nums = [1,1,1,2] and k = 3
è¾“å‡º: 
2
```
**æ ·ä¾‹2ï¼š**
```python
è¾“å…¥: 
nums = [2,1,-1,4,2,-3] and k = 3
è¾“å‡º: 
2
```


```python
def subarray_sum_equals_k_i_i(self, nums: List[int], k: int) -> int:
	# å‰ç¼€å’Œåˆ—è¡¨ã€‚
	sums = [0]
	# ä¿å­˜å‰ç¼€å’ŒåŠæ•°ç»„ç´¢å¼•çš„ dictã€‚
	hash_map = {0: 0}
	res = -1
	# è®¡ç®—å‰ç¼€å’Œçš„åŒæ—¶è®¡ç®—æ»¡è¶³é¢˜æ„çš„éç©ºå­åˆ—è¡¨ã€‚
	for i in range(len(nums)):
		n = nums[i]
		# å‰ç¼€å’Œã€‚
		prefix_sum = sums[len(sums) - 1] + n
		# å‰ç¼€å’Œæ”¾å…¥ sums åˆ—è¡¨ä¸­ã€‚
		sums.append(prefix_sum)
		# æŸ¥æ‰¾æ»¡è¶³å½“å‰å‰ç¼€å’Œ sum - k çš„è·ç¦»å½“å‰ä½ç½®æœ€è¿‘çš„å‰ç¼€å’Œã€‚
		idx = hash_map.get(prefix_sum - k)
		# å¦‚æœæ‰¾åˆ°ï¼Œåˆ™æ›´æ–°å½“å‰çš„ç»“æœã€‚
		if idx is not None:
			length = i - idx + 1
			if res < 0 or length < res:
				res = length
		# å°†å½“å‰å‰ç¼€å’Œä¸æ•°ç»„ç´¢å¼•æ”¾åˆ°å“ˆå¸Œè¡¨ä¸­ã€‚
		hash_map[prefix_sum] = i + 1
	return res
```
pass

è§£é‡‹:
step1

# **LintCode 1844: Subarray Sum Equals to K IIï¼ˆæœ€çŸ­å­æ•°ç»„å’Œç­‰äº Kï¼‰**

---

## **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡å€¼ `k`ï¼Œæ‰¾åˆ° **å’Œç­‰äº `k` çš„æœ€çŸ­éç©ºå­æ•°ç»„**ï¼Œè¿”å›å…¶**é•¿åº¦**ã€‚

å¦‚æœ **ä¸å­˜åœ¨è¿™æ ·çš„å­æ•°ç»„**ï¼Œè¿”å› `-1`ã€‚

#### **ç¤ºä¾‹**

`è¾“å…¥ï¼š nums = [1, 1, 1, 2, 3, 4] k = 5  è¾“å‡ºï¼š 2`

**è§£é‡Š**

`æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æœ‰ï¼š [2,3]ï¼ˆé•¿åº¦=2ï¼‰ [1,4]ï¼ˆé•¿åº¦=2ï¼‰`

æœ€çŸ­çš„é•¿åº¦æ˜¯ `2`ï¼Œæ‰€ä»¥è¿”å› `2`ã€‚

---

## **è§£æ³•ï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆåŒæŒ‡é’ˆï¼‰**

### **æ ¸å¿ƒæ€è·¯**

1. **åˆ©ç”¨å‰ç¼€å’Œ**
    
    - è®¡ç®— `prefix_sum[i]`ï¼Œè¡¨ç¤º `nums[0]` åˆ° `nums[i]` çš„ç´¯ç§¯å’Œï¼š 
    - è‹¥ **å‰ç¼€å’Œ `prefix_sum[i] - k` ä¹‹å‰å‡ºç°è¿‡**ï¼Œåˆ™è¯´æ˜**å­˜åœ¨ `sum(nums[l+1:i]) = k`**ã€‚
2. **å“ˆå¸Œè¡¨å­˜å‚¨å‰ç¼€å’Œ**
    
    - ç»´æŠ¤ `hash_map`ï¼ˆå­—å…¸ï¼‰ï¼šè®°å½•**æŸä¸ªå‰ç¼€å’Œé¦–æ¬¡å‡ºç°çš„ç´¢å¼•**ã€‚
    - **å¦‚æœ `prefix_sum - k` åœ¨ `hash_map` ä¸­ï¼Œè®¡ç®—å½“å‰å­æ•°ç»„é•¿åº¦**ï¼Œæ›´æ–° `res`ã€‚

---

## **ä»£ç è§£æ**
```python
def subarray_sum_equals_k_i_i(self, nums: List[int], k: int) -> int:
    # å‰ç¼€å’Œåˆ—è¡¨
    sums = [0]
    # è®°å½•å‰ç¼€å’Œé¦–æ¬¡å‡ºç°çš„ç´¢å¼•
    hash_map = {0: 0}
    res = -1  # è®°å½•æœ€çŸ­å­æ•°ç»„é•¿åº¦ï¼Œé»˜è®¤ä¸º -1ï¼ˆä¸å­˜åœ¨ï¼‰

    # éå†æ•°ç»„è®¡ç®—å‰ç¼€å’Œ
    for i in range(len(nums)):
        n = nums[i]
        prefix_sum = sums[-1] + n  # è®¡ç®—å½“å‰å‰ç¼€å’Œ
        sums.append(prefix_sum)  # å­˜å…¥å‰ç¼€å’Œåˆ—è¡¨
        
        # æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ `prefix_sum - k`
        idx = hash_map.get(prefix_sum - k)
        if idx is not None:  # è¯´æ˜æ‰¾åˆ°äº†å­æ•°ç»„å’Œä¸º k
            length = i - idx + 1  # è®¡ç®—å½“å‰å­æ•°ç»„é•¿åº¦
            if res < 0 or length < res:  # æ›´æ–°æœ€çŸ­é•¿åº¦
                res = length
        
        # å­˜å‚¨å½“å‰å‰ç¼€å’Œå¯¹åº”çš„ç´¢å¼•ï¼ˆè‹¥è¯¥å‰ç¼€å’Œæœªå‡ºç°è¿‡ï¼‰
        hash_map.setdefault(prefix_sum, i + 1)
    
    return res

```

---

## **é€æ­¥æ‰§è¡Œåˆ†æ**

**è¾“å…¥**

`nums = [1, 1, 1, 2, 3, 4] k = 5`

---

### **åˆå§‹åŒ–**

|å˜é‡|åˆå§‹å€¼|
|---|---|
|`sums = [0]`|è®°å½•å‰ç¼€å’Œ|
|`hash_map = {0: 0}`|è®°å½•å‰ç¼€å’Œé¦–æ¬¡å‡ºç°çš„ç´¢å¼•|
|`res = -1`|æœ€çŸ­å­æ•°ç»„é•¿åº¦|

---

### **éå† `nums`**

|`i`|`nums[i]`|`prefix_sum` è®¡ç®—|`prefix_sum - k`|`hash_map` æŸ¥è¯¢|`res` æ›´æ–°|`hash_map` è®°å½•|
|---|---|---|---|---|---|---|
|0|1|`0 + 1 = 1`|`1 - 5 = -4`|ä¸å­˜åœ¨|-|`{0: 0, 1: 1}`|
|1|1|`1 + 1 = 2`|`2 - 5 = -3`|ä¸å­˜åœ¨|-|`{0: 0, 1: 1, 2: 2}`|
|2|1|`2 + 1 = 3`|`3 - 5 = -2`|ä¸å­˜åœ¨|-|`{0: 0, 1: 1, 2: 2, 3: 3}`|
|3|2|`3 + 2 = 5`|`5 - 5 = 0`|`hash_map[0] = 0`|`4 - 0 = 4`|`{0: 0, 1: 1, 2: 2, 3: 3, 5: 4}`|
|4|3|`5 + 3 = 8`|`8 - 5 = 3`|`hash_map[3] = 3`|`5 - 3 = 2` âœ…|`{0: 0, 1: 1, 2: 2, 3: 3, 5: 4, 8: 5}`|
|5|4|`8 + 4 = 12`|`12 - 5 = 7`|ä¸å­˜åœ¨|-|`{0: 0, 1: 1, 2: 2, 3: 3, 5: 4, 8: 5, 12: 6}`|

æœ€ç»ˆè¿”å›ï¼š

`2`

æœ€çŸ­å­æ•°ç»„ï¼š

- `[2,3]`ï¼ˆé•¿åº¦=2ï¼‰
- `[1,4]`ï¼ˆé•¿åº¦=2ï¼‰

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

1. **æ—¶é—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šéå† `nums` ä¸€æ¬¡ï¼Œæ¯æ¬¡ `O(1)` è®¡ç®— `prefix_sum` å’ŒæŸ¥è¯¢ `hash_map`ï¼Œæ€»å¤æ‚åº¦æ˜¯ `O(n)`ã€‚
2. **ç©ºé—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼š`hash_map` éœ€è¦å­˜å‚¨ `O(n)` ä¸ªå‰ç¼€å’Œã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. æš´åŠ›æ³• `O(n^2)`**

- **æ€è·¯**
    - æšä¸¾æ‰€æœ‰å­æ•°ç»„ `nums[i:j]`ï¼Œè®¡ç®— `sum(nums[i:j])` å¹¶ç»Ÿè®¡ç¬¦åˆ `sum == k` çš„æœ€çŸ­å­æ•°ç»„é•¿åº¦ã€‚
    - **ç¼ºç‚¹**ï¼šæ—¶é—´å¤æ‚åº¦ `O(n^2)`ï¼Œå¯¹äºå¤§æ•°æ®ä¸é€‚ç”¨ã€‚
```python
def subarray_sum_equals_k_ii(nums, k):
    n = len(nums)
    res = float('inf')

    for i in range(n):
        total = 0
        for j in range(i, n):
            total += nums[j]
            if total == k:
                res = min(res, j - i + 1)

    return res if res != float('inf') else -1

```

---

## **æ–¹æ³•æ¯”è¾ƒ**

|æ–¹æ³•|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|
|**å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆæœ€ä½³è§£æ³•ï¼‰**|`O(n)`|`O(n)`|**å¤§æ•°æ®æœ€ä¼˜**|
|æš´åŠ›æ³•|`O(n^2)`|`O(1)`|**æ•°æ®è¾ƒå°æ—¶å¯ç”¨**|

ğŸš€ **å‰ç¼€å’Œ `O(n)` è§£æ³•æ˜¯æœ€ä¼˜ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®ï¼**