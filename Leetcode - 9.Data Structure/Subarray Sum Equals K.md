Lintcode 838
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°kï¼Œä½ éœ€è¦æ‰¾åˆ°è¿ç»­å­æ•°åˆ—çš„å’Œä¸ºkçš„æ€»ä¸ªæ•°ã€‚

**æ ·ä¾‹1**
```python
"""
è¾“å…¥: nums = [1,1,1] å’Œ k = 2
è¾“å‡º: 2
è§£é‡Š:
å­æ•°ç»„ [0,1] å’Œ [1,2]
```
**æ ·ä¾‹2**
```python
"""
è¾“å…¥: nums = [2,1,-1,1,2] å’Œ k = 3
è¾“å‡º: 4
è§£é‡Š:
å­æ•°ç»„ [0,1], [1,4], [0,3] and [3,4]
```


```python
def subarray_sum_equals_k(self, nums: List[int], k: int) -> int:
	count, pre = 0, 0
	mp = {}
	mp[0] = 1
	for i in range(len(nums)):
		pre += nums[i]
		if (pre - k) in mp:
			count += mp.get(pre - k)
		if pre not in mp:
			mp[pre] = 0
		mp[pre] += 1
	return count
```
pass

è§£é‡‹:
step1


# **LintCode 838: Subarray Sum Equals Kï¼ˆå­æ•°ç»„å’Œç­‰äº Kï¼‰**

---

## **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡å€¼ `k`ï¼Œæ‰¾åˆ° **è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°**ï¼Œä½¿å¾—å…¶å…ƒç´ ä¹‹å’Œç­‰äº `k`ã€‚
#### **ç¤ºä¾‹**

`è¾“å…¥ï¼š nums = [1, 1, 1] k = 2  è¾“å‡ºï¼š 2`

**è§£é‡Š**
```python
æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„æœ‰ï¼š
[1, 1]ï¼ˆç´¢å¼• 0 åˆ° 1ï¼‰
[1, 1]ï¼ˆç´¢å¼• 1 åˆ° 2ï¼‰
```
---

## **è§£æ³•ï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆåŒæŒ‡é’ˆï¼‰**

### **æ ¸å¿ƒæ€è·¯**

1. **åˆ©ç”¨å‰ç¼€å’Œ**
    
    - è®¡ç®— `prefix_sum[i]`ï¼Œè¡¨ç¤º `nums[0]` åˆ° `nums[i]` çš„ç´¯ç§¯å’Œï¼š 
    - è‹¥ `prefix_sum[j] - prefix_sum[i] = k`ï¼Œè¯´æ˜ä» `i+1` åˆ° `j` çš„å­æ•°ç»„å’Œä¸º `k`ï¼š 
    
2. **å“ˆå¸Œè¡¨å­˜å‚¨å‰ç¼€å’Œ**
    - ç»´æŠ¤ `mp`ï¼ˆå“ˆå¸Œè¡¨ï¼‰ï¼šè®°å½•**æŸä¸ªå‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°**ã€‚
    - **å¦‚æœ `prefix_sum - k` åœ¨ `mp` ä¸­ï¼Œè¯´æ˜å­˜åœ¨æŸä¸ªå­æ•°ç»„æ»¡è¶³ `sum == k`**ï¼Œè®¡æ•°å¢åŠ  `mp[prefix_sum - k]`ã€‚

---

## **ä»£ç è§£æ**
```python
def subarray_sum_equals_k(self, nums: List[int], k: int) -> int:
    count, pre = 0, 0  # count è®°å½•ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°ï¼Œpre è®°å½•å½“å‰å‰ç¼€å’Œ
    mp = {}  # å“ˆå¸Œè¡¨å­˜å‚¨å‰ç¼€å’Œå‡ºç°æ¬¡æ•°
    mp[0] = 1  # å¤„ç†ä»ç´¢å¼• 0 å¼€å§‹çš„å­æ•°ç»„

    for i in range(len(nums)):
        pre += nums[i]  # è®¡ç®—å½“å‰å‰ç¼€å’Œ

        if (pre - k) in mp:  # æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ prefix_sum - k
            count += mp.get(pre - k)  # å¢åŠ ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ä¸ªæ•°

        if pre not in mp:
            mp[pre] = 0  # åˆå§‹åŒ–å‰ç¼€å’Œè®¡æ•°
        mp[pre] += 1  # è®°å½•å‰ç¼€å’Œå‡ºç°çš„æ¬¡æ•°

    return count

```

---

## **é€æ­¥æ‰§è¡Œåˆ†æ**

**è¾“å…¥**
`nums = [1, 1, 1] k = 2`

---

### **åˆå§‹åŒ–**

|å˜é‡|åˆå§‹å€¼|
|---|---|
|`count = 0`|è®°å½•ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„æ•°é‡|
|`pre = 0`|å½“å‰å‰ç¼€å’Œ|
|`mp = {0: 1}`|è®°å½•å‰ç¼€å’Œ `0` å‡ºç° 1 æ¬¡|

---

### **éå† `nums`**

|`i`|`nums[i]`|`pre += nums[i]`|`pre - k`|`mp[pre - k]` æŸ¥è¯¢|`count` æ›´æ–°|`mp` è®°å½•|
|---|---|---|---|---|---|---|
|0|1|`1`|`1 - 2 = -1`|ä¸åœ¨ `mp` ä¸­|`0`|`mp = {0: 1, 1: 1}`|
|1|1|`2`|`2 - 2 = 0`|`mp[0] = 1`|`1`|`mp = {0: 1, 1: 1, 2: 1}`|
|2|1|`3`|`3 - 2 = 1`|`mp[1] = 1`|`2`|`mp = {0: 1, 1: 1, 2: 1, 3: 1}`|

æœ€ç»ˆè¿”å›ï¼š

`2`

**æ»¡è¶³ `sum == k` çš„å­æ•°ç»„**

- `[1, 1]`ï¼ˆç´¢å¼• `0~1`ï¼‰
- `[1, 1]`ï¼ˆç´¢å¼• `1~2`ï¼‰

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

3. **æ—¶é—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šéå† `nums` ä¸€æ¬¡ï¼Œæ¯æ¬¡ `O(1)` è®¡ç®— `pre` å’ŒæŸ¥è¯¢ `mp`ï¼Œæ€»å¤æ‚åº¦æ˜¯ `O(n)`ã€‚
4. **ç©ºé—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šæœ€åæƒ…å†µä¸‹ï¼Œ`mp` éœ€è¦å­˜å‚¨ `O(n)` ä¸ªå‰ç¼€å’Œã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. æš´åŠ›æ³• `O(n^2)`**

- **æ€è·¯**
    - æšä¸¾æ‰€æœ‰å­æ•°ç»„ `nums[i:j]`ï¼Œè®¡ç®—å’Œ `sum(nums[i:j])` å¹¶ç»Ÿè®¡ç¬¦åˆ `sum == k` çš„å­æ•°ç»„ä¸ªæ•°ã€‚
    - **ç¼ºç‚¹**ï¼šæ—¶é—´å¤æ‚åº¦ `O(n^2)`ï¼Œå¯¹äºå¤§æ•°æ®ä¸é€‚ç”¨ã€‚
    
```python
def subarray_sum_equals_k(nums, k):
    count = 0
    for i in range(len(nums)):
        total = 0
        for j in range(i, len(nums)):
            total += nums[j]
            if total == k:
                count += 1
    return count
```

---

## **æ–¹æ³•æ¯”è¾ƒ**

|æ–¹æ³•|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|
|**å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆæœ€ä½³è§£æ³•ï¼‰**|`O(n)`|`O(n)`|**å¤§æ•°æ®æœ€ä¼˜**|
|æš´åŠ›æ³•|`O(n^2)`|`O(1)`|**æ•°æ®è¾ƒå°æ—¶å¯ç”¨**|

ğŸš€ **å‰ç¼€å’Œ `O(n)` è§£æ³•æ˜¯æœ€ä¼˜ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®ï¼**