Lintcode 153
ç»™å®šä¸€ä¸ªæ•°ç»„Â `num`Â å’Œä¸€ä¸ªæ•´æ•°Â `target`. æ‰¾åˆ°Â `num`Â ä¸­æ‰€æœ‰çš„æ•°å­—ä¹‹å’Œä¸ºÂ `target`Â çš„ç»„åˆ.


**æ ·ä¾‹ 1:**
```python
"""
è¾“å…¥: num = [7,1,2,5,1,6,10], target = 8
è¾“å‡º: [[1,1,6],[1,2,5],[1,7],[2,6]]
```
**æ ·ä¾‹ 2:**
```python
"""
è¾“å…¥: num = [1,1,1], target = 2
è¾“å‡º: [[1,1]]
è§£é‡Š: è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆ
```


```python
    def combination_sum2(self, num, target): 
        # write your code here
        num.sort()        
        self.ans, tmp, use = [], [], [0] * len(num)        
        self.dfs(num, target, 0, 0, tmp, use)        
        return self.ans    
    def dfs(self, can, target, p, now, tmp, use):        
        if now == target:            
            self.ans.append(tmp[:])            
            return        
        for i in range(p, len(can)):            
            if now + can[i] <= target and (i == 0 or can[i] != can[i-1] or use[i-1] == 1):                
                tmp.append(can[i])
                use[i] = 1                
                self.dfs(can, target, i+1, now + can[i], tmp, use)                
                tmp.pop()                
                use[i] = 0
```
pass


# **LintCode 153: Combination Sum II è§£æ³•åˆ†æ**

## **è§£é¡Œç›®æ¨™**

çµ¦å®šä¸€å€‹æ•¸çµ„ `num`ï¼ˆå¯èƒ½åŒ…å« **é‡è¤‡æ•¸å­—**ï¼‰ï¼Œä»¥åŠä¸€å€‹ç›®æ¨™æ•¸å€¼ `target`ï¼Œæ‰¾å‡ºæ‰€æœ‰ **ä¸é‡è¤‡çš„çµ„åˆ**ï¼Œä½¿å¾—çµ„åˆä¸­æ•¸å­—çš„ç¸½å’Œç­‰æ–¼ `target`ã€‚  
**æ¯å€‹æ•¸å­—åªèƒ½ä½¿ç”¨ä¸€æ¬¡**ã€‚

ç¯„ä¾‹ï¼š

`è¼¸å…¥: num = [10,1,2,7,6,1,5], target = 8 è¼¸å‡º: [[1,1,6],[1,2,5],[1,7],[2,6]]`

---

## **è§£æ³•æ ¸å¿ƒ**

é€™æ˜¯ä¸€å€‹ **çµ„åˆå‹å›æº¯ (Combination + Backtracking) å•é¡Œ**ï¼Œå› ç‚ºï¼š

1. **ä¸èƒ½é‡è¤‡ä½¿ç”¨åŒä¸€å€‹æ•¸å­—**ï¼ˆèˆ‡ Combination Sum I çš„å€åˆ¥ï¼‰ã€‚
2. **éœ€è¦å»é™¤é‡è¤‡çµ„åˆ**ï¼ˆå› ç‚º `num` å¯èƒ½æœ‰é‡è¤‡å…ƒç´ ï¼‰ã€‚
3. **æ•¸å­—ä¸èƒ½æ”¹è®Šé †åº**ï¼ˆå…ˆæ’åºï¼Œç„¶å¾Œ `dfs` é€²è¡Œéå¢æœç´¢ï¼‰ã€‚

### **è§£æ³•ç­–ç•¥**

1. **å…ˆæ’åº**ï¼šç¢ºä¿ç›¸åŒçš„æ•¸å­—ç›¸é„°ï¼Œæ–¹ä¾¿å»é‡ã€‚
2. **å›æº¯ (Backtracking)**
    - éæ­·æ•¸çµ„ä¸­çš„æ¯å€‹æ•¸å­—ï¼š
        - è‹¥ç•¶å‰æ•¸å­— `can[i]` è¶…é `target`ï¼Œå‰‡å‰ªæã€‚
        - è‹¥ç•¶å‰æ•¸å­— `can[i]` èˆ‡å‰ä¸€å€‹æ•¸å­—ç›¸åŒï¼Œä¸”å‰ä¸€å€‹æ•¸å­—æœªä½¿ç”¨éï¼Œå‰‡è·³éï¼ˆå»é‡ï¼‰ã€‚
    - é€é `dfs` é€²è¡Œéè¿´æ¢ç´¢ **ç•¶å‰çµ„åˆ**ã€‚
    - **å›æº¯ (Backtrack)**ï¼šåœ¨æ¯æ¬¡éæ­¸è¿”å›å¾Œï¼Œå°‡ç•¶å‰æ•¸å­—å¾ `tmp` ç§»é™¤ï¼Œä»¥æ¸¬è©¦å…¶ä»–å¯èƒ½çµ„åˆã€‚

---

## **è§£æ³•æ­¥é©Ÿ**

### **Step 1: é è™•ç†**

å° `num` é€²è¡Œ **éå¢æ’åº**ï¼Œç¢ºä¿ç›¸åŒæ•¸å­—ç›¸é„°ï¼Œæ–¹ä¾¿å¾ŒçºŒå»é‡ã€‚

### **Step 2: å›æº¯ (DFS)**

ä½¿ç”¨ **éæ­¸æ·±åº¦å„ªå…ˆæœç´¢ (DFS)**ï¼Œå¾ `p` é–‹å§‹éæ­·ï¼š

1. **é‚Šç•Œæ¢ä»¶**ï¼š
    - è‹¥ç•¶å‰ç¸½å’Œ `now` **ç­‰æ–¼ `target`**ï¼Œå‰‡å°‡ `tmp` åŠ å…¥ç­”æ¡ˆã€‚
    - è‹¥ `now` **è¶…é `target`**ï¼Œå‰‡ç›´æ¥è¿”å›ï¼ˆå‰ªæï¼‰ã€‚
2. **éæ­· `num[p:]`**ï¼š
    - è·³é **ç›¸åŒæ•¸å­—ä½†æœªä½¿ç”¨éçš„æƒ…æ³**ï¼ˆé¿å…é‡è¤‡ï¼‰ã€‚
    - éæ­¸å˜—è©¦é¸æ“‡ `can[i]`ã€‚
    - **å›æº¯ (pop æ‰ç•¶å‰é¸æ“‡ï¼Œæ¢å¾©ç‹€æ…‹)**ã€‚

---

## **è®Šæ•¸å®šç¾©**

|è®Šæ•¸åç¨±|ä½œç”¨|
|---|---|
|`num`|çµ¦å®šçš„æ•¸çµ„ï¼Œæ’åºå¾Œç”¨æ–¼çµ„åˆæœå°‹|
|`target`|ç›®æ¨™å’Œ|
|`tmp`|ç•¶å‰çµ„åˆ|
|`use`|è¨˜éŒ„ `num` ä¸­å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨|
|`ans`|å­˜å„²æ‰€æœ‰ç¬¦åˆæ¢ä»¶çš„çµ„åˆ|
|`p`|ç•¶å‰ DFS æœå°‹ä½ç½®|
|`now`|ç•¶å‰çµ„åˆç¸½å’Œ|
|`can[i]`|ç•¶å‰éæ­·çš„æ•¸å­—|

---

## **å…·é«”ç¯„ä¾‹**

### **ç¯„ä¾‹ 1**

text

è¤‡è£½ç·¨è¼¯

`è¼¸å…¥: num = [10,1,2,7,6,1,5], target = 8`

#### **Step 1: æ’åº**

text

è¤‡è£½ç·¨è¼¯

`æ’åºå¾Œ: [1,1,2,5,6,7,10]`

#### **Step 2: DFS éè¿´æœç´¢**

|éæ­¸å±¤|`tmp`|`now`|è¨˜éŒ„ `use`|é¸æ“‡|
|---|---|---|---|---|
|0|`[]`|`0`|`[0,0,0,0,0,0,0]`|é¸æ“‡ `1`|
|1|`[1]`|`1`|`[1,0,0,0,0,0,0]`|é¸æ“‡ `1`|
|2|`[1,1]`|`2`|`[1,1,0,0,0,0,0]`|é¸æ“‡ `6`|
|3|`[1,1,6]`|`8`|`[1,1,0,0,1,0,0]`|**æ‰¾åˆ°è§£ï¼ŒåŠ å…¥ `ans`**|
|å›æº¯|`[1,1]`|`2`|`[1,1,0,0,0,0,0]`|é¸æ“‡ `2`|
|3|`[1,2]`|`3`|`[1,0,1,0,0,0,0]`|é¸æ“‡ `5`|
|4|`[1,2,5]`|`8`|`[1,0,1,1,0,0,0]`|**æ‰¾åˆ°è§£ï¼ŒåŠ å…¥ `ans`**|

**æœ€çµ‚çµæœ**

text

è¤‡è£½ç·¨è¼¯

`[[1,1,6], [1,2,5], [1,7], [2,6]]`

---

## **æ™‚é–“èˆ‡ç©ºé–“è¤‡é›œåº¦åˆ†æ**

### **æ™‚é–“è¤‡é›œåº¦**

- **æ’åº**ï¼š`O(n log n)`
- **å›æº¯æœç´¢**ï¼š
    - æœ€å·®æƒ…æ³ç‚º `O(2^n)`ï¼Œå› ç‚ºæ¯å€‹å…ƒç´ éƒ½æœ‰ **é¸æ“‡èˆ‡ä¸é¸æ“‡** å…©ç¨®æƒ…æ³ã€‚
    - ä½†ç”±æ–¼ **å‰ªæ (å‰ªå»è¶…é `target` çš„æƒ…æ³)**ï¼Œå¯¦éš›æƒ…æ³é å°æ–¼ `O(2^n)`ã€‚
- **ç¸½è¨ˆ**ï¼š`O(2^n)`

### **ç©ºé–“è¤‡é›œåº¦**

- ä¸»è¦ä¾†è‡ªæ–¼ **éè¿´æ£§** å’Œ **æš«å­˜çµ„åˆ `tmp`**ã€‚
- æœ€å¤šç‚º `O(n)`ï¼ˆ`n` å±¤éè¿´ï¼‰ã€‚
- **ç¸½è¨ˆ**ï¼š`O(n)`

---

## **å…¶ä»–è§£æ³• (ä¸å¯« Code)**

1. **Bitmask æšèˆ‰ (`O(2^n)`)**
    
    - éæ­·æ‰€æœ‰å¯èƒ½çš„çµ„åˆ (`2^n`)ï¼Œè¨ˆç®—å’Œæ˜¯å¦ç­‰æ–¼ `target`ã€‚
    - **ç¼ºé»**ï¼šä¸å¤ é«˜æ•ˆï¼Œä¸”ç„¡æ³•å»é‡ã€‚
2. **å‹•æ…‹è¦åŠƒ (`O(n * target)`)**
    
    - `dp[i][j]` è¡¨ç¤ºå‰ `i` å€‹æ•¸å­—æ˜¯å¦èƒ½æ¹Šå‡º `j`ã€‚
    - **é©åˆ** `target` **è¼ƒå°** çš„æƒ…æ³ï¼Œä½† **ä¸é©ç”¨æ–¼è¼¸å‡ºæ‰€æœ‰çµ„åˆ**ã€‚

---

## **ç¸½çµ**

|**è§£æ³•**|**æ™‚é–“è¤‡é›œåº¦**|**é©ç”¨å ´æ™¯**|**å„ªç¼ºé»**|
|---|---|---|---|
|**å›æº¯ + å‰ªæ (DFS, `O(2^n)`)**|`O(2^n)`|æ•¸å­—æ•¸é‡å°‘ä½† `target` å¤§|âœ… é«˜æ•ˆå‰ªæï¼Œå»é‡|
|**Bitmask (`O(2^n)`)**|`O(2^n)`|é©ç”¨æ–¼å°æ•¸çµ„|âŒ å»é‡å›°é›£|
|**å‹•æ…‹è¦åŠƒ (`O(n * target)`)**|`O(n * target)`|é©ç”¨æ–¼å° `target`|âŒ ç„¡æ³•è¼¸å‡ºæ‰€æœ‰çµ„åˆ|

---

## **æœ€ä½³è§£æ³•**

âœ… **å›æº¯ (DFS) + å‰ªæ** (`O(2^n)`)

- **å»é‡è™•ç†**
- **æ¸›å°‘ä¸å¿…è¦çš„æœç´¢**
- **é©ç”¨æ–¼æ•¸å­—æ•¸é‡ `n` è¼ƒå°ä½† `target` å¤§çš„æƒ…æ³**

ğŸš€ **å‰ªæ + æ’åºæ˜¯é«˜æ•ˆé—œéµï¼**

  

O