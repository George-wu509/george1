Lintcode 140
计算 a^n %b ，其中`a`，`b`和`n`都是32位的非负整数。


**样例 1：**
输入：
```python
"""
a = 3
b = 7
n = 5
```
输出：
```python
"""
5
```
解释：
3 ^ 5 % 7 = 5

**样例 2：**
输入：
```python
"""
a = 3
b = 1
n = 0
```
输出：
```python
"""
0
```
解释：
3 ^ 0% 1 = 0


```python
    def fastPower(self, a, b, n):
        ans = 1
        while n > 0:
            if n % 2 == 1:
                ans = (ans * a) % b
            a = a * a % b
            n = n // 2
        return ans % b
```
pass

## **LintCode 140: Fast Power 解法分析**

### **解法核心：快速幂 (Fast Exponentiation)**

本題要求計算：

$(a^n) \mod b$

若直接使用 **暴力指數運算**（如 `pow(a, n) % b`），當 `n` 很大時，指數爆炸導致計算時間過長。因此，**快速幂演算法 (Binary Exponentiation)** 利用 **二進制性質** 將指數 `n` 拆解成更小的問題，通過指數翻倍的方式加速運算。

---

## **解法步驟**

1. **初始化**：
    - `ans = 1`：存儲結果 `(a^n) % b`
    - `a = a % b`：預先處理，防止 `a` 太大造成溢位
2. **快速冪迴圈**：
    - **若 `n` 為奇數 (`n % 2 == 1`)**，則將 `ans` 乘上 `a` 並取模： $ans = (ans \times a) \mod b$
    - **更新 `a` 為 `a^2`**（指數翻倍），並取模： $a = (a \times a) \mod b$
    - **將 `n` 除以 2** (`n //= 2`)，表示指數右移一位 (`n = n // 2`)。
3. **返回 `ans % b`**。

---

## **變數定義**

|變數名稱|作用|
|---|---|
|`a`|底數（不斷平方）|
|`b`|取模數，確保計算結果不會溢出|
|`n`|指數（以二進制方式遞減）|
|`ans`|存儲最終 `(a^n) % b` 結果|
|`n % 2 == 1`|判斷 `n` 是否為奇數，決定是否要累積 `ans`|
|`a = (a * a) % b`|更新 `a` 為 `a^2 % b`，進行指數翻倍|

---

## **具體範例**

### **範例 1**

`輸入: a = 2, b = 3, n = 5 計算: (2^5) % 3`

#### **步驟計算**

|`n`|`ans`|`a` (更新為 `a^2 % b`)|`n` (更新為 `n // 2`)|
|---|---|---|---|
|5 (奇數)|`1 * 2 % 3 = 2`|`2^2 % 3 = 1`|`5 // 2 = 2`|
|2 (偶數)|`2`|`1^2 % 3 = 1`|`2 // 2 = 1`|
|1 (奇數)|`2 * 1 % 3 = 2`|`1^2 % 3 = 1`|`1 // 2 = 0`|
|0 (結束)|`2`|`-`|`-`|

**輸出結果：** `2`

---

### **範例 2**

`輸入: a = 3, b = 7, n = 4 計算: (3^4) % 7`

#### **步驟計算**

|`n`|`ans`|`a` (更新為 `a^2 % b`)|`n` (更新為 `n // 2`)|
|---|---|---|---|
|4 (偶數)|`1`|`3^2 % 7 = 2`|`4 // 2 = 2`|
|2 (偶數)|`1`|`2^2 % 7 = 4`|`2 // 2 = 1`|
|1 (奇數)|`1 * 4 % 7 = 4`|`4^2 % 7 = 2`|`1 // 2 = 0`|
|0 (結束)|`4`|`-`|`-`|

**輸出結果：** `4`

---

## **時間與空間複雜度分析**

### **時間複雜度**

- 由於 `n` 每次 **減少一半 (`n // 2`)**，迴圈執行次數為 `O(log n)`。
- 乘法與取模運算皆為 `O(1)`，因此整體時間複雜度為： O(log⁡n)O(\log n)O(logn)

### **空間複雜度**

- 僅使用固定變數 (`ans`, `a`, `b`, `n`)，**空間複雜度為 `O(1)`**。

---

## **其他解法 (不寫 Code)**

1. **暴力指數運算 (`O(n)`)**
    
    - 直接計算 `a^n` 然後取模 `b`，時間複雜度 `O(n)`。
    - **缺點**：`n` 過大時 **時間過長，可能溢出**。
2. **遞歸版快速冪 (`O(log n)`)**
    
    - **分治策略**：
        - 若 `n` 是偶數：`(a^n) % b = ((a^(n/2))^2) % b`
        - 若 `n` 是奇數：`(a^n) % b = ((a^(n-1)) * a) % b`
    - **優勢**：適用於 **函數遞迴調用**，但有 `O(log n)` 的 **遞歸棧記憶體消耗**。
3. **矩陣快速冪 (`O(log n)`)**
    
    - 適用於 **費波那契數列計算**，利用矩陣乘法加速指數計算。
    - **適用範圍**：適合 **線性遞推關係**（如斐波那契、線性遞歸數列）。

---

## **總結**

|**解法**|**時間複雜度**|**適用範圍**|**優缺點**|
|---|---|---|---|
|**快速冪 (Binary Exponentiation)**|`O(log n)`|**大指數運算**|高效且適用於所有 `a^n % b` 問題|
|**暴力乘法**|`O(n)`|`n` 很小時|速度慢，容易溢出|
|**遞歸快速冪**|`O(log n)`|遞歸友好的場景|需要額外記憶體存遞歸棧|
|**矩陣快速冪**|`O(log n)`|適用於線性遞推|適用範圍受限|

最佳選擇仍然是 **快速冪 (Binary Exponent**
