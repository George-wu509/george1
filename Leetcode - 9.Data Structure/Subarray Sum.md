Lintcode 138
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°å’Œä¸ºÂ 0Â çš„å­æ•°ç»„ã€‚ä½ çš„ä»£ç åº”è¯¥è¿”å›æ»¡è¶³è¦æ±‚çš„å­æ•°ç»„çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®

**æ ·ä¾‹ 1:**
```python
"""
è¾“å…¥: [-3, 1, 2, -3, 4]
è¾“å‡º: [0,2] æˆ– [1,3]	
æ ·ä¾‹è§£é‡Šï¼š è¿”å›ä»»æ„ä¸€æ®µå’Œä¸º0çš„åŒºé—´å³å¯ã€‚
```
**æ ·ä¾‹ 2:**
```python
"""
è¾“å…¥: [-3, 1, -4, 2, -3, 4]
è¾“å‡º: [1,5]
```


```python
    def subarray_sum(self, nums):
        prefix_hash = {0: -1}
        prefix_sum = 0
        for i, num in enumerate(nums):
            prefix_sum += num
            if prefix_sum in prefix_hash:
                return prefix_hash[prefix_sum] + 1, i
            prefix_hash[prefix_sum] = i
            
        return -1, -1
```
pass

nums = Â [-3, 1, 2, -3, 4]  
è§£é‡‹:  
step1: ç”¨dictå»ºç«‹ä¸€å€‹hash table, å¦ä¸€å€‹è®Šæ•¸prefix_sumæ˜¯å‰ç¼€å’Œ.  
step2: å¾id=0å¾€å³, æ¯å€‹idè¨ˆç®—prefix_sum, ä¸¦æŠŠæ¯å€‹prefix_sumåŠ å…¥hash table  
step3: æ¯ä¸€å€‹stepè¨ˆç®—æ–°çš„prefix_sum, ä¸¦checkæ˜¯å¦åœ¨hash tableè£¡æœ‰è·Ÿç•¶å‰prefix_sumä¸€æ¨£çš„å€¼  
å› ç‚ºé€™ä»£è¡¨æ–°çš„idçš„prefix_sum(new)åˆ°ä»¥å‰å­˜çš„prefix_sum(old)  
prefix_sum(new)-prefix_sum(old)=0  

è§£é‡‹(II):
éš¨è‘—for loop, å°‡æ–°çš„numåŠ ä¸Šprefix_sumæˆæ–°çš„prefix_sum, ä¸¦å’Œä¹‹å‰çš„prefix_hashæ¯”è¼ƒ. å¦‚æœæœ‰ç›¸åŒçš„ä»£è¡¨prefix_sum[i] - prefix[j] = 0 ä»£è¡¨åœ¨nums[j+1:i]çš„å’Œç‚º0

nums = [1, 2, 3, 4]
id =   [0, 1, 2, 3]

prefix_sum = [0, 1, 3, 6, 10]
id         = [0, 1, 2, 3, 4 ]


nums[1]+nums[2] = 2+3 = 5
prefix[3] - prefix[1] = 5

# **LintCode 138: Subarray Sumï¼ˆå­æ•°ç»„å’Œï¼‰**

---

## **é¢˜ç›®æè¿°**

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæ‰¾åˆ°ä¸€ä¸ª **è¿ç»­çš„å­æ•°ç»„**ï¼Œä½¿å¾— **è¯¥å­æ•°ç»„çš„å’Œä¸º `0`**ï¼Œè¿”å›å­æ•°ç»„çš„**èµ·å§‹ç´¢å¼•å’Œç»“æŸç´¢å¼•**ã€‚

#### **ç¤ºä¾‹**

`è¾“å…¥ï¼š nums = [1, 2, -3, 3]  è¾“å‡ºï¼š (0, 2)`

**è§£é‡Š**

`å­æ•°ç»„ [1, 2, -3] çš„å’Œä¸º 0ï¼Œå¯¹åº”ç´¢å¼•èŒƒå›´ (0,2)ã€‚`

---

## **è§£æ³•ï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆåŒæŒ‡é’ˆï¼‰**

### **æ ¸å¿ƒæ€è·¯**

1. **å‰ç¼€å’Œçš„æ¦‚å¿µ**
    
    - è®¡ç®— `prefix_sum[i]`ï¼Œè¡¨ç¤º `nums[0]` åˆ° `nums[i]` çš„ç´¯ç§¯å’Œï¼š 
    - è‹¥ `prefix_sum[j] == prefix_sum[i]`ï¼ˆ`j < i`ï¼‰ï¼Œè¯´æ˜ `nums[j+1]` åˆ° `nums[i]` çš„å’Œä¸º `0`ï¼š 
2. **å“ˆå¸Œè¡¨å­˜å‚¨å‰ç¼€å’Œ**
    
    - **é”®**ï¼šå‰ç¼€å’Œ `prefix_sum`ã€‚
    - **å€¼**ï¼šè¯¥å‰ç¼€å’Œç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• `index`ã€‚
    - **è‹¥æŸä¸ª `prefix_sum` åœ¨å“ˆå¸Œè¡¨ä¸­å·²å­˜åœ¨**ï¼Œè¯´æ˜å­˜åœ¨å­æ•°ç»„æ»¡è¶³ `sum == 0`ï¼Œè¿”å›ç´¢å¼• `(start, end)`ã€‚

---

### **ä»£ç è§£æ**
```python
def subarray_sum(self, nums):
    prefix_hash = {0: -1}  # è®°å½•å‰ç¼€å’Œï¼Œåˆå§‹å€¼è¡¨ç¤ºç©ºæ•°ç»„
    prefix_sum = 0  # è®°å½•å½“å‰å‰ç¼€å’Œ

    for i, num in enumerate(nums):
        prefix_sum += num  # è®¡ç®—å½“å‰å‰ç¼€å’Œ

        if prefix_sum in prefix_hash:  # è‹¥å‰ç¼€å’Œå·²å‡ºç°ï¼Œæ‰¾åˆ°å­æ•°ç»„
            return prefix_hash[prefix_sum] + 1, i

        prefix_hash[prefix_sum] = i  # å­˜å‚¨å½“å‰å‰ç¼€å’Œçš„ç´¢å¼•

    return -1, -1  # æ— ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„

```

---

## **é€æ­¥æ‰§è¡Œåˆ†æ**

**è¾“å…¥**

`nums = [1, 2, -3, 3]`

---

### **åˆå§‹åŒ–**

|å˜é‡|åˆå§‹å€¼|
|---|---|
|`prefix_hash = {0: -1}`|è®°å½•å‰ç¼€å’Œ `0` å‡ºç°äº `-1` ä½ç½®|
|`prefix_sum = 0`|å½“å‰å‰ç¼€å’Œ|

---

### **éå† `nums`**

|`i`|`num`|`prefix_sum` è®¡ç®—|`prefix_hash` æŸ¥è¯¢|ç»“æœ|
|---|---|---|---|---|
|0|1|`0 + 1 = 1`|`prefix_hash = {0: -1, 1: 0}`|æ— åŒ¹é…|
|1|2|`1 + 2 = 3`|`prefix_hash = {0: -1, 1: 0, 3: 1}`|æ— åŒ¹é…|
|2|-3|`3 + (-3) = 0`|`prefix_sum=0` åœ¨ `prefix_hash` ä¸­ï¼Œæ‰¾åˆ° `(prefix_hash[0] + 1, i) = (0,2)`|**è¿”å› (0, 2)**|

æœ€ç»ˆè¿”å›ï¼š

`(0, 2)`

---

## **æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æ**

3. **æ—¶é—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šéå† `nums` ä¸€æ¬¡ï¼Œæ¯æ¬¡ `O(1)` è®¡ç®— `prefix_sum` å’Œ `prefix_hash`ã€‚
4. **ç©ºé—´å¤æ‚åº¦**
    
    - **`O(n)`**ï¼šæœ€åæƒ…å†µä¸‹ï¼Œå“ˆå¸Œè¡¨ `prefix_hash` éœ€è¦å­˜å‚¨ `O(n)` ä¸ªå‰ç¼€å’Œã€‚

---

## **å…¶ä»–è§£æ³•**

### **1. æš´åŠ›æ³• `O(n^2)`**

- **æ€è·¯**
    - æšä¸¾æ‰€æœ‰å­æ•°ç»„ `nums[i:j]`ï¼Œè®¡ç®—å’Œ `sum(nums[i:j])`ã€‚
    - **æ—¶é—´å¤æ‚åº¦ `O(n^2)`ï¼Œä¸é€‚åˆå¤§æ•°æ®ã€‚**
```python
def subarray_sum(nums):
    n = len(nums)
    
    for i in range(n):
        curr_sum = 0
        for j in range(i, n):
            curr_sum += nums[j]
            if curr_sum == 0:
                return i, j

    return -1, -1

```
---

## **æ–¹æ³•æ¯”è¾ƒ**

|æ–¹æ³•|æ—¶é—´å¤æ‚åº¦|ç©ºé—´å¤æ‚åº¦|é€‚ç”¨æƒ…å†µ|
|---|---|---|---|
|**å‰ç¼€å’Œ + å“ˆå¸Œè¡¨ï¼ˆæœ€ä½³è§£æ³•ï¼‰**|`O(n)`|`O(n)`|**é€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®**|
|æš´åŠ›æ³•|`O(n^2)`|`O(1)`|**é€‚ç”¨äºæ•°æ®è¾ƒå°**|

ğŸš€ **å‰ç¼€å’Œ `O(n)` è§£æ³•æ˜¯æœ€ä¼˜ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®ï¼**
