Lintcode 980
实现一个基础计算器来计算一个简单表达式字符串。
这个表达式字符串只包含 **非负** 整数，运算符 `+`, `-`, `*`, `/` 以及空格 。 整数除法应该舍去小数。
你可以假设给出的表达式总是合理的。

Example:
例1:
输入:
"3+2*2"
输出:7

例2:
输入:
" 3/2 "
输出:1

```python
    def calculate(self, s: str) -> int:
        # Write your code here
        n = len(s)
        stack = []
        preSign = '+'
        num = 0
        for i in range(n):
            if s[i] != ' ' and s[i].isdigit():
                num = num * 10 + ord(s[i]) - ord('0')
            if i == n - 1 or s[i] in '+-*/':
                if preSign == '+':
                    stack.append(num)
                elif preSign == '-':
                    stack.append(-num)
                elif preSign == '*':
                    stack.append(stack.pop() * num)
                else:
                    stack.append(int(stack.pop() / num))
                preSign = s[i]
                num = 0
        return sum(stack)
```
pass


### **解法分析**

這題 **Basic Calculator III** 需要處理 `+`, `-`, `*`, `/` 四則運算，並且支持整數運算和操作優先順序。其核心思路是 **使用一個棧（stack）來存儲數值，並在處理到運算符時決定如何更新數值**。

---

### **解法核心**

1. **數字處理**
    
    - 若當前字元是數字，則考慮多位數的情況，累積到 `num` 中（`num = num * 10 + 當前數字`）。
    - 例如：`"23+5"` 解析 `"23"` 時，`num = 2 * 10 + 3 = 23`。
2. **運算符處理**
    
    - 當遇到 `+`, `-`, `*`, `/` 或是到達字串尾部時：
        - 依據 `preSign`（上一次的運算符）來決定如何處理 `num`：
            - **`+`**：將 `num` 加入棧中。
            - **`-`**：將 `-num` 加入棧中。
            - **`*`**：從棧頂取出數字並與 `num` 相乘，將結果壓回棧。
            - **`/`**：從棧頂取出數字並與 `num` 相除（向零取整），將結果壓回棧。
        - 更新 `preSign` 為當前運算符，並重置 `num = 0`。
3. **最後結果**
    
    - 由於 `stack` 存儲的是所有數字的加減結果（乘除已經在運算時處理完），所以最後直接計算 `sum(stack)` 即可得到最終答案。

---

### **變數說明**

|變數名稱|作用|
|---|---|
|`stack`|儲存數字（正數或負數），加減直接存入，乘除先計算後存入|
|`preSign`|記錄上一個運算符，確保正確計算|
|`num`|累積當前解析的數字|
|`n`|字串長度，用於迭代|

---

### **示例解析**

#### **輸入**：`"3+2*2"`

#### **運行步驟**

|`i`|`char`|`num`|`preSign`|`stack`|操作說明|
|---|---|---|---|---|---|
|0|`'3'`|`3`|`'+'`|`[]`|數字解析|
|1|`'+'`|`3`|`'+'`|`[3]`|`+3` 入棧|
|2|`'2'`|`2`|`'+'`|`[3]`|數字解析|
|3|`'*'`|`2`|`'+'`|`[3, 2]`|`+2` 入棧|
|4|`'2'`|`2`|`'*'`|`[3]`|數字解析|
|5|**結束**|`2`|`'*'`|`[3, 4]`|`2 * 2 = 4`，結果入棧|

最終 `sum([3, 4]) = 7`，返回 **7**。

---

### **時間與空間複雜度分析**

- **時間複雜度：** `O(N)`
    - 只需遍歷字串一次，每個字元處理為 `O(1)`，總共 `O(N)`。
- **空間複雜度：** `O(N)`
    - 最壞情況下（`"1+2+3+4+5"`），所有數字都需要存入棧，因此 `O(N)`。

---

### **其他可能解法**

4. **雙棧解法（運算符棧 + 數字棧）**
    
    - 使用 **數字棧** 和 **運算符棧**，遇到 `*` 和 `/` 時先計算，`+` 和 `-` 則推入棧，最後統一計算。
5. **遞歸處理括號**
    
    - 當遇到 `(` 時，遞歸計算 `)` 內部的值，並返回結果，適用於處理括號情境。
6. **轉換為後序表達式（Reverse Polish Notation, RPN）**
    
    - 先將中序表達式轉為後序表達式，再用 **逆波蘭表示法** 進行計算。

這題的 **棧解法** 在處理 `+ - * /` 時較為直觀，且能正確維持運算優先順序。