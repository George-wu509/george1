
## Laplace Filtering, Sobel, Canny

Ref1: [邊緣偵測 - 拉普拉斯算子 ( Laplacian Operator )](https://medium.com/%E9%9B%BB%E8%85%A6%E8%A6%96%E8%A6%BA/%E9%82%8A%E7%B7%A3%E5%81%B5%E6%B8%AC-%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E7%AE%97%E5%AD%90-laplacian-operator-ea877f1945a0)


==**拉普拉斯算子 ( Laplacian Operator )**==
![[Pasted image 20240911103307.png]]
前一篇文章提到的[拉普拉斯算子 ( Laplacian operator )](https://medium.com/%E9%9B%BB%E8%85%A6%E8%A6%96%E8%A6%BA/%E9%82%8A%E7%B7%A3%E5%81%B5%E6%B8%AC-%E6%8B%89%E6%99%AE%E6%8B%89%E6%96%AF%E7%AE%97%E5%AD%90-laplacian-operator-ea877f1945a0)，不只是測邊的唯一方法，這篇文章介紹的索伯算子 ( Sobel operator ) 是更常被使用的算子。

相較於拉普拉斯算子而言，索伯算子只用圖像的梯度作為判斷依據，且對於不同方向性的邊界是用分開的面罩 ( Mask ) 來做偵測，當梯度變化超過一個閥值，即判斷為邊界。


==邊緣偵測 - 索伯算子 ( Sobel Operator )==

Ref2: [邊緣偵測 - 索伯算子 ( Sobel Operator )](https://medium.com/%E9%9B%BB%E8%85%A6%E8%A6%96%E8%A6%BA/%E9%82%8A%E7%B7%A3%E5%81%B5%E6%B8%AC-%E7%B4%A2%E4%BC%AF%E7%AE%97%E5%AD%90-sobel-operator-95ca51c8d78a)


![](https://miro.medium.com/v2/resize:fit:1250/1*M_ruK7CfnPCohHWbw-HTig.png)

索伯算子對應到的面罩分為上圖的左右兩個，左邊負責偵測水平向的邊界，右邊負責偵測垂直向的邊界。所以 A 表示輸入影像，G 表示梯度，則公式如下：

![](https://miro.medium.com/v2/resize:fit:659/1*JvSL7OXbog-Nm1OT6aE4EQ.png)

將兩個分量結合為梯度：

![](https://miro.medium.com/v2/resize:fit:328/1*BCFvDj6VHuZAGL7CWZ8prg.png)

為了更快速的運算可改為：

![](https://miro.medium.com/v2/resize:fit:319/1*agEeWGp9YsnIVJnqzZx3tQ.png)

而角度則為：

![](https://miro.medium.com/v2/resize:fit:364/1*QQePj_PRiEjHXzgiitWxmw.png)

==邊緣偵測懶人包-Canny演算法==

ref3: [邊緣偵測懶人包-Canny演算法](https://medium.com/@bob800530/opencv-%E5%AF%A6%E4%BD%9C%E9%82%8A%E7%B7%A3%E5%81%B5%E6%B8%AC-canny%E6%BC%94%E7%AE%97%E6%B3%95-d6e0b92c0aa3)

# 理論

Canny演算法是一個複合性的邊緣偵測演算法，結合了**Gaussian Filter**、**梯度偵測、非最大值抑制、判斷邊界**四個演算法去實踐邊緣偵測

# 流程

## Step 1: Filter out any noise

運用Gaussian Filter濾除雜訊，以下為Kernel=5的高斯矩陣。

![](https://miro.medium.com/v2/resize:fit:279/0*6smJAJ0ntyKvsujP.png)

Gaussian矩陣(Kernel = 5)

> 對高斯濾波器不熟悉的讀者可以參考以下的連結

[

## [Python]Gaussian Filter-概念與實作

### 實作 Gaussian Filter

medium.com



](https://medium.com/@bob800530/python-gaussian-filter-%E6%A6%82%E5%BF%B5%E8%88%87%E5%AF%A6%E4%BD%9C-676aac52ea17?source=post_page-----d6e0b92c0aa3--------------------------------)

## Step 2: Find the intensity gradient of the image

透過Sobel濾波器濾出邊緣的強度及方向

![](https://miro.medium.com/v2/resize:fit:205/0*eqfM-L7wzCBi7e6l.png)

Sobel x, y兩方向濾波器

![](https://miro.medium.com/v2/resize:fit:153/0*qAxtW1pSvoCIDSjk.png)

邊緣的強度及方向

## **Step 3:** _Non-maximum_ suppression

**_3.1尋找最大梯度方向_**

為了簡化計算，梯度的方向約略分成四種，0度、45度、90度、135度

![](https://miro.medium.com/v2/resize:fit:875/1*ivhjZY4nyLdEAaCyueOpXw.png)

**_3.2最大值抑制_**

利用最大值抑制的演算法，去尋找個方向梯度變化最大的點，以下圖為例

已經確定此梯度方向為45度，就逐步尋找矩陣內，45度方向強度最大的點，其餘45度方向的點皆歸0，就如同下方的最大值示意圖

![](https://miro.medium.com/v2/resize:fit:719/1*OAJYyCAtA69PJSzIpny2wA.png)

最大值抑制示意圖

![](https://miro.medium.com/v2/resize:fit:875/1*OAL1KWoRoICjUfkaMr0meg.png)

最大值抑制運用

## Step 4: _Connect Weak Edge_

透過Connect Weak Edge將線連起來，設定高界線與低界線，依循這樣的機制，找出邊緣。

a.高於高界線:一定是邊緣

b.低於低界線:一定不是邊緣

c.介於高界線與低界線:若附近有兩點高於高界線的點，則此點也視為邊緣

![](https://miro.medium.com/v2/resize:fit:875/1*QDjt8mKdbueT1o0JZazVFg.png)

## 結論

Canny是一個複合型的邊緣偵測演算法，在找尋邊緣時，相當簡單易用，一口氣把濾雜訊的Gassian跟邊緣偵測的Sobel兩個截然不同的濾波器都作進去，直接一個函式找出邊緣。